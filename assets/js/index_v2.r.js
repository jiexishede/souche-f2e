/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2012 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.8.3
 *
 */

define("index/car-god",[],function(){var e={init:function(){var e=150,t=$("#qa .cheshen-box .cheshen-detail:eq(0)"),n=0;$("#qa .cheshen-box .cheshen-detail").each(function(e,t){$(t).attr("data-index",e)}),$("#qa .cheshen-box .cheshen-detail").css({height:0}),$("#qa .cheshen-box .cheshen-detail:eq(0)").css({height:e});var r=!1;$("#qa .cheshen-box").on("mouseover",function(){var i=$(this).find(".cheshen-detail"),s=i.attr("data-index");!r&&n!=s&&(t.animate({height:0},400),r=!0,setTimeout(function(){r=!1},500),$(this).find(".cheshen-detail").animate({height:e},400),$("#qa .show").removeClass("close"),$(this).find(".show").addClass("close"),t=i,n=s)})}};return e}),define("index/top-nav",[],function(){var e={init:function(){$(".nav-item").each(function(e,t){var n=$(t).find(".nav-inner");$(n).css({opacity:0}).removeClass("hidden"),$(n).attr("data-height",$(n).height()).addClass("hidden");var r=$(t).width(),i=$(t).height(),s=n.width();$(t).attr("data-width",r),$(t).attr("data-height",i),$(t).attr("data-innerWidth",s)});var e={},t=10001;$(".nav-item").mouseenter(function(n){var r=$(this).attr("data-name");e[r]=!0;var i=this;setTimeout(function(){if(!e[r])return;var n=$(i).attr("data-width"),s=$(i).attr("data-height"),o=$(i).find(".nav-inner");o.removeClass("hidden"),$(i).css("zIndex",++t);var u=o.attr("data-height");o.attr("data-height",u),o.css({width:n,height:s,opacity:1}).animate({width:$(i).attr("data-innerWidth"),height:u,opacity:1},400)},200)}).mouseleave(function(){var t=$(this).attr("data-name");e[t]=!1;var n=this,r=$(n).attr("data-width"),i=$(n).attr("data-height"),s=$(n).find(".nav-inner"),o=s.attr("data-height");s.animate({width:r,height:i,opacity:1},300,function(){s.css({height:o}).addClass("hidden")})})}};return e}),define("souche/util/sc-db",[],function(){var e=function(e){this.namespace=(e||"souche")+"_"},t={valueToArray:function(e){return e==null?[]:e.splice&&e.length?e:[e]}};return e.prototype={get:function(e){e=this.namespace+e;var t=localStorage.getItem(e);return t=JSON.parse(t),t.length?t[0]:(t=null,t)},set:function(e,n){e=this.namespace+e,n=t.valueToArray(n);try{localStorage.setItem(e,JSON.stringify(n))}catch(r){}},gets:function(e){e=this.namespace+e;var t=localStorage.getItem(e);return t=JSON.parse(t),t},sets:function(e,n){e=this.namespace+e,n=t.valueToArray(n);try{localStorage.setItem(e,JSON.stringify(n))}catch(r){}},add:function(e,n){var r=this.gets(e),n=t.valueToArray(n);r?r=r.concat(n):n&&(r=n),this.sets(e,r)},del:function(e){e=this.namespace+e,localStorage.setItem(e,"")}},e}),define("souche/util/load-info",["souche/util/sc-db"],function(e){var t="BRAND_CACHE_KEY",n="SERIES_CACHE_KEY",r=new e("LOADINFO");return{loadBrands:function(e){var n=null;try{n=r.get(t)}catch(i){}n?e(n):$.ajax({url:contextPath+"/pages/dicAction/loadRootLevel.json",dataType:"json",data:{type:"car-subdivision"},success:function(n){r.set(t,n),e(n)},error:function(){},failure:function(){}})},loadSeries:function(e,t){var i=null;try{i=r.get(n+e)}catch(s){}i?t(i):$.ajax({url:contextPath+"/pages/dicAction/loadRootLevelForCar.json",dataType:"json",data:{type:"car-subdivision",code:e},success:function(i){r.set(n+e,i),t(i)},error:function(){},failure:function(){}})}}}),define("index/qiugouModel",[],function(){var e={},t={},n={},r={},i=[],s={};t.adviserYear=n,t.adviserBudget=r,t.adviserInstrest=i,t.adviserYear.modify=!1,t.adviserBudget.modify=!1,t.adviserInstrest.modify=!1;var o={},u={year:"adviserYear",budget:"adviserBudget",addInstrest:"addAdviserInstrest",deleteInstrest:""},a=function(e){o[e]=o[e]||[];for(var t=0,n=o[e].length;t<n;t++)o[e][t].call(this)},f=function(e,t){for(var n in u)u.hasOwnProperty(n)&&n===e&&a.call(t,n)},l={};return l.ModifyAdviserYear=function(e){return n.minYear==e.min&&r.maxYear==e.max?!0:(n.minYear=e.min,n.maxYear=e.max,f("year",n),!0)},l.GetAdviserYear=function(){return n},l.ModifyAdviserBudget=function(e){return r.minBudget==e.min&&r.maxBudget==e.max?!0:(r.minBudget=e.min,r.maxBudget=e.max,f("budget",r),!0)},l.GetAdviserBudget=function(){return r},l.AddAdviserInstrest=function(e){for(var t=0,n=i.length;t<n;t++)if(i[t].seriesCode==e.seriesCode)return!0;return require(["index/modelSeries"],function(t){t.addSelectedSeries(e.seriesCode)}),i.push(e),f("addInstrest",e),!0},l.DeleteAdviserInstrest=function(e){for(var t=0,n=i.length;t<n;t++)if(i[t].seriesCode==e.seriesCode)return i.splice(t,1),require(["index/modelSeries"],function(t){t.deleteSelectedSeries(e.seriesCode)}),f("deleteInstrest",e),!0;return!1},l.GetAdviserInstrest=function(){return i},l.UpdateAdviserModel=function(e){},l.AddSubscribe=function(e,t){o[e]=o[e]||[],o[e].push(t)},l.Rollback=function(){e.userRequementJson=s;while(i[0])this.DeleteAdviserInstrest(i[0]);this.init(e)},l.init=function(t){e=t;var n=e.userRequementJson;s=n;for(var r in n){this.ModifyAdviserBudget({min:n.startBudget,max:n.endBudget}),this.ModifyAdviserYear({min:n.startYear,max:n.endYear});for(var i=0;i<n.brand.length;i++){var o=n.brand[i].split(","),u={name:o[0],seriesCode:o[1],type:"brand"};this.AddAdviserInstrest(u)}for(var i=0;i<n.series.length;i++){var o=n.series[i].split(","),u={name:o[1],seriesCode:o[0],type:"serie"};this.AddAdviserInstrest(u)}break}},l}),define("souche/util/auto-scroll",[],function(){var e=function(e,t){this.ele=$(e),this.time=t,this.nowIndex=0,this.length=0,this.itemHeight=this.ele.height(),this.init()};return e.prototype={init:function(){var e=this.ele.find(".item");this.length=e.length;var t=this;setInterval(function(){t.nowIndex++,t.nowIndex>=t.length&&(t.nowIndex=0);var n=0;for(var r=0;r<t.nowIndex;r++)n+=e.eq(r).height();t.ele.animate({scrollTop:n})},this.time)}},function(t,n){return new e(t,n)}}),define("souche/util/animate-list",[],function(){var e=function(e,t){this.list=e||[],this.index=0,this.callback=t,this.next()};return e.prototype={next:function(){if(this.index==this.list.length){this.callback();return}var e=this.list[this.index];this.index++;var t=this;$(e[0]).animate(e[1],e.length>=3?e[2]:500,function(){t.next()})}},function(t,n){return new e(t,n)}}),define("index/modelSeries",[],function(){var e={},t={},n={},r={},i=function(e,t,n){var r={};for(var i=0,s=e.length;i<s;i++){var o=t.call(n||window,e[i]);r[o]?r[o].push(e[i]):r[o]=[e[i]]}return r};return r.init=function(e){var t=e.brand_api,r=e.userRequementJson;r.brand=r.brand||[],r.series=r.series||[];for(var s=0;s<r.brand.length;s++){var o=r.brand[s].split(",");n[o[1]]=!0}for(var s=0;s<r.series.length;s++){var o=r.series[s].split(",");n[o[0]]=!0}$.ajax({url:t,dataType:"json"}).done(function(e){var t=i(e.items,function(e){return e.name.split(" ")[0]}),n="";for(var r in t)if(t.hasOwnProperty(r)){n+="<li><span data-id='"+r+"'>"+r+"</span>";for(var s in t[r])t[r].hasOwnProperty(s)&&(n+="<a code='"+t[r][s].code+"'>"+t[r][s].enName+"</a>");n+="</li>"}$(".addInstrestCarContent .brandList ul").html(n)})},r.GetSeries=function(e,n){var r=config.series_api+e;if(t[e])this.SetSeries(e,n,t[e]);else{var i=this;$.ajax({url:r,dataType:"json",context:i}).done(function(t){this.SetSeries(e,n,t)})}},r.SetSeries=function(e,r,i){t[e]||(t[e]=i.codes,t[e].name=r),$(".chexi .chexiTitle span").attr("code",e),n[e]?$(".chexi .chexiTitle span").addClass("active"):$(".chexi .chexiTitle span").removeClass("active");var s="";for(var o in t[e])if(t[e].hasOwnProperty(o)&&o!="name"){s+="<li>",s+="<h1>"+o+"</h1>";for(var u in t[e][o])t[e][o].hasOwnProperty(u)&&(n[t[e][o][u].code]?s+="<span code='"+t[e][o][u].code+"' class='active'>"+t[e][o][u].name+"</span>":s+="<span code='"+t[e][o][u].code+"'>"+t[e][o][u].name+"</span>")}$(".chexi .chexiContent ul").html(s)},r.addSelectedSeries=function(e){n[e]=!0},r.deleteSelectedSeries=function(e){delete n[e];var t=$("#carsNav ul li.active").attr("id"),r=$("."+t+" .brandList ul li a.active").attr("code"),i=$("."+t+" .brandList ul li a.active").html();this.GetSeries(r,i)},r}),define("index/qiugou_v2",["souche/util/load-info","index/qiugouModel","souche/util/auto-scroll","souche/util/animate-list","index/qiugouModel","index/modelSeries"],function(e,t,n,r,t,i){var s={},o={},u=!0,a=function(){var e=s.tabID||$("#carsNav li[class='active']").attr("id");$(".brandList a,.chexiContent span,.chexiTitle span").live("click",function(e){if(e.target.tagName=="A"){$(".brandList a").removeClass("active"),$(this).addClass("active");var n=$(this).attr("code"),r;$(this).attr("data-name")?r=$(this).attr("data-name"):r=$(this).html(),i.GetSeries(n,r)}else if(!$(this).hasClass("active")){$(this).addClass("active");var s=$(this).attr("code"),r;$(this).attr("data-name")?r=$(this).attr("data-name"):r=$(this).html();var o=e.target.tagName=="SPAN"?"serie":"brand";t.AddAdviserInstrest({seriesCode:s,name:r,type:o})}else{$(this).removeClass("active");var s=$(this).attr("code"),r;$(this).attr("data-name")?r=$(this).attr("data-name"):r=$(this).html();var o=e.target.tagName=="SPAN"?"serie":"brand";t.DeleteAdviserInstrest({seriesCode:s,name:r,type:o})}return!1}),$(".instrestCarItem").live("click",function(e){var n=$(this).attr("seriescode"),r=$(this).find("a").html(),i=$(this).attr("type");return t.DeleteAdviserInstrest({seriesCode:n,name:r,type:i}),$(this).remove(),!1}),$(".addInstrestCarSubmit span").click(function(){var t=$(".carsItem").eq(0).width(),n=$(".addInstrestCarTilte").height(),r=$("."+e).find(".addInstrestCar").eq(0).height(),i={vertical:!0,fade:!1};return c($("."+e).find(".addInstrestCar"),i),!1}),$(".operationItem .dataContainer .submit,.bindunLoginInfo .modify .submit").click(function(){var t={horizontal:!0,fade:!0};return $("."+e).find(".dialogContentContainer").css("zIndex",999).css("background"),f($("."+e).find(".dialogContent"),t),$("."+e+" .operationItem .low-price").val()&&$("."+e+" .dialogContentContainer .low-price").val($("."+e+" .operationItem .low-price").val()),$("."+e+" .operationItem .high-price").val()&&$("."+e+" .dialogContentContainer .high-price").val($("."+e+" .operationItem .high-price").val()),!1}),$(".dialogContent .submit").click(function(){var n={horizontal:!0,fade:!0},r=$("."+e+" .carBudget .dataContainer .leftContainer input").val(),i=$("."+e+" .carBudget .dataContainer .rightContainer input").val(),o=new RegExp(/(^\d[\d|.]*\d$)|(^\d+$)/);if(o.test(r)&&o.test(i)){if(parseInt(r)>parseInt(i))return $("."+e+" .warning").html("预算输入有错误").removeClass("hidden"),window.setTimeout(function(){$("."+e+" .warning").addClass("hidden")},2e3),!1}else if(r!=""&&i!="")return!1;t.ModifyAdviserBudget({min:parseInt(r)*1e4,max:parseInt(i)*1e4});var u=$("."+e+" .caryear .dataContainer .age-left .selected_values").val(),a=$("."+e+" .caryear .dataContainer .age-right .selected_values").val();if(r&&i&&r>i){$("."+e+" .warning").html("价格填写有错误").removeClass("hidden"),window.setTimeout(function(){$("."+e+" .warning").addClass("hidden")},2e3);return}t.ModifyAdviserYear({min:$("."+e+" .caryear .dataContainer .age-left .selected_values").val(),max:$("."+e+" .caryear .dataContainer .age-right .selected_values").val()});var f=t.GetAdviserInstrest(),l=[],c=[];for(var h=0,p=f.length;h<p;h++){var d=f[h].type;d=="brand"?c.push(f[h].seriesCode):l.push(f[h].seriesCode)}var v=$("."+e+" .carBudget .dataContainer .leftContainer input").val(),m=$("."+e+" .carBudget .dataContainer .rightContainer input").val(),u=$("."+e+" .caryear .dataContainer .age-left .selected_values").val()||"",a=$("."+e+" .caryear .dataContainer .age-right .selected_values").val()||"",g=s.submit_api;g+="?minPrice="+v,g+="&maxPrice="+m,g+="&minYear="+u,g+="&maxYear="+a,g+="&brands="+c.join(),g+="&series="+l.join();if(!(v||m||u||a||c.length||l.length)){$("."+e+" .warning").html("请至少选择一项").removeClass("hidden");return}return $(".dialogContent .submit").html("提交中...").addClass("loading").attr("disabled","true"),$.ajax({url:g,dataType:"json",success:function(){window.location.reload(),$(".dialogContent .submit").html("提交").removeClass("loading").attr("disabled",!1)},error:function(){$(".dialogContent .submit").html("提交").removeClass("loading").attr("disabled",!1)}}),!1}),$(".dialogContent .cancel").click(function(e){o(e)});var o=function(n){var r="."+e+" .dialogContent",i="."+e+" .addInstrestCar";if(!$(r).hasClass("hidden")){var s={horizontal:!0,fade:!0};h($("."+e).find(".dialogContent"),s),window.setTimeout(function(){$("."+e).find(".dialogContentContainer").css("zIndex",-99)},1e3)}else if(!$(i).hasClass("hidden")){var s={vertical:!0,fade:!1};c($("."+e).find(".addInstrestCar"),s),window.setTimeout(function(){f($("."+e).find(".dialogContent"),s)},500),t.Rollback()}};$(".addCarinstrestItem").live("click",function(t){t.preventDefault();var n={vertical:!0,fade:!1};return h($("."+e).find(".dialogContent"),n),$("."+e).find(".addInstrestCar").css("top","-900px").removeClass("hidden"),window.setTimeout(function(){l($("."+e).find(".addInstrestCar"),n)},500),t.stopPropagation(),!1}),$("#carsNav li").click(function(){$("#carsNav li").removeClass("active"),$(this).addClass("active");var t=$(this).attr("id");return e=t,$(window).trigger("tab_change",t),t==="myAdviser"?u():t=="hotNewCars"&&$(".hotNewCars img").each(function(e,t){$(t).attr("src",$(t).attr("data-original"))}),$(".carsContent").addClass("hidden"),$(".carsContent."+e+"Content").removeClass("hidden"),!1});var u=function(){$(".adviserInitAnimate").length!=0&&($(".adviserInitAnimate .boytalk").css({left:-400}),$(".adviserInitAnimate .girltalk").css({left:-600}),$(".adviserInitAnimate .bg").animate({left:0},500),r([[".adviserInitAnimate .road",{left:0},600],[".adviserInitAnimate .boy",{left:0},500],[".adviserInitAnimate .boytalk",{left:0},500],[".adviserInitAnimate .girl",{left:0},500],[".adviserInitAnimate .girltalk",{left:0},500]],function(){n(".adviserInitAnimate .boytalk .talk-inner",5e3),setTimeout(function(){n(".adviserInitAnimate .girltalk .talk-inner",5e3)},500)}))};$(".brandNav a").live("click",function(){var e=$(this).attr("data-id"),t=$("#carsNav ul li.active").attr("id");if(!$("."+t+" .brandList span[data-id='"+e+"']").offset())return!1;var n=$("."+t+" .brandList span[data-id='"+e+"']").offset().top-$("."+t+" .brandList span").eq(0).offset().top;return $("."+t+" .brandList").scrollTop(n),!1}),$(".addInstrestCar .addInstrestCarSubmit .submit ").click(function(){var t={vertical:!0,fade:!1};return c($("."+e).find(".addInstrestCar"),t),window.setTimeout(function(){f($("."+e).find(".dialogContent"),t)},500),!1}),$(".addInstrestCar .addInstrestCarSubmit .cancel ").click(function(e){return o(e),!1}),$(".carinstrestItem").live("click",function(){var e=$(this);return t.DeleteAdviserInstrest({seriesCode:$(e).attr("seriescode"),name:$(e).find("a").html(),type:$(e).attr("type")}),!1}),t.AddSubscribe("year",function(){this.minYear||this.maxYear?($(".carsItem .year span").html(this.minYear+"-"+this.maxYear),$(".caryear .dataContainer .age_select .sc-select-content").html(this.minYear),$(".caryear .dataContainer .age_select_high .sc-select-content").html(this.maxYear),$(".caryear .dataContainer .age_select .selected_values").val(this.minYear),$(".caryear .dataContainer .age_select_high .selected_values").val(this.minYear)):($(".carsItem .year span").html("不限"),$(".caryear .dataContainer .age_select .sc-select-content").html("请选择"),$(".caryear .dataContainer .age_select_high .sc-select-content").html("请选择"),$(".caryear .dataContainer .age_select .selected_values").val(""),$(".caryear .dataContainer .age_select_high .selected_values").val(""))}),t.AddSubscribe("budget",function(){!this.minBudget||$(".carBudget .dataContainer .leftContainer input").val(parseInt(this.minBudget)/1e4),!this.maxBudget||$(".carBudget .dataContainer .rightContainer input").val(parseInt(this.maxBudget)/1e4),this.minBudget||this.maxBudget?this.minBudget?this.maxBudget?$(".carsItem .yusuan span").html(parseInt(this.minBudget)/1e4+"-"+parseInt(this.maxBudget)/1e4+"万元"):$(".carsItem .yusuan span").html(parseInt(this.minBudget)/1e4+"万以上"):$(".carsItem .yusuan  span").html(parseInt(this.maxBudget)/1e4+"万以内"):$(".carsItem .yusuan span").html("不限")}),t.AddSubscribe("addInstrest",function(){var e='<span class="instrestCarItem" seriesCode=\''+this.seriesCode+"' type='"+this.type+"'><a>"+this.name+"</a><span></span></span>";$(".addInstrestCarTilte").append(e),$('<span class="carinstrestItem" seriesCode=\''+this.seriesCode+"' type='"+this.type+"'><a>"+this.name+"</a><span></span></span>").insertBefore($(".addCarinstrestItem")),$(".interestCar span[seriesCode='"+this.seriesCode+"']").length==0&&($(".interestCar span").eq(0).html()==="不限"&&$(".interestCar span").eq(0).remove(),$(".interestCar").append("<span seriesCode='"+this.seriesCode+"' type='"+this.type+"'>"+this.name+"</span>"))}),t.AddSubscribe("deleteInstrest",function(){$(".addInstrestCarTilte span[seriesCode='"+this.seriesCode+"']").remove(),$(".carinstrest span[seriesCode='"+this.seriesCode+"']").remove(),$(".interestCar span[seriesCode='"+this.seriesCode+"']").remove(),$(".interestCar span").length===0&&$(".interestCar .interestCarContainer").append("<span>不限</span>")}),t.init(s),i.init(s)},f=function(e,t){var n=$(".carsItem").eq(0).width(),r=$("#carsNav").width(),i=e.height();e.removeClass("hidden"),t.horizontal?(e.css("overflow","hidden").css("width",n),e.find("div,a").fadeTo(0,0),e.removeClass("hidden"),p(e,t,r,500,function(){e.find("div,a").fadeTo("fast",1),e.css("overflow","")})):(e.css("width",r),p(e,t,0,500));var s=$("#carsNav ul li.active").attr("id");$(".carsContent."+s+"Content").height()<500?($(".carsContent."+s+"Content").css("overflow","visible"),$(".carsContent."+s+"Content"+" ."+s).eq(0).css("minHeight","450px")):$(".carsContent."+s+"Content").css("overflow","auto")},l=function(e,t){e.css("width",$("#carsNav").width()),p(e,t,0,500),e.removeClass("hidden");var n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="";for(var i=0;i<n.length;i++)r+="<a data-id='"+n[i]+"'>"+n[i]+"</a>";$(".brandNav").html(r);var s=$("#carsNav ul li.active").attr("id");$(".carsContent."+s+"Content").height()<500?($(".carsContent."+s+"Content").css("overflow","visible"),$(".carsContent."+s+"Content"+" ."+s).eq(0).css("minHeight","490px")):$(".carsContent."+s+"Content").css("overflow","auto"),e.find(".brandList ul li").eq(0).find("a").click()},c=function(e,t){p(e,t,-532,500,function(){e.addClass("hidden")});var n=$("#carsNav ul li.active").attr("id");$(".carsContent."+n+"Content").css({overflow:"visible"}),$(".carsContent."+n+"Content"+" ."+n).eq(0).css("minHeight","450px")},h=function(e,t){var n=$(".carsItem").eq(0).width(),r=$("#carsNav").width(),i=e.height();t.horizontal?(e.find("div,a").fadeTo("fast",0),window.setTimeout(function(){p(e,t,n,500,function(){e.addClass("hidden").css("width",r),e.find("div,a").fadeTo("fast","1")})},500)):t.vertical&&(e.css("width",r),p(e,t,-532,500,function(){e.addClass("hidden")}));var s=$("#carsNav ul li.active").attr("id");$(".carsContent."+s+"Content").css({overflow:"auto"}),$(".carsContent."+s+"Content"+" ."+s).eq(0).css("minHeight","")},p=function(e,t,n,r,i){t.horizontal?e.stop(!0).animate({width:n+"px"},r,function(){i&&i(),e.css("width",$("#carsNav").width())}):e.stop(!0).animate({top:n+"px"},r,function(){i&&i(),e.css("width",$("#carsNav").width())})},d=function(e){s=e,a();var t=s.userRequementJson};return o.init=d,o}),Souche.UI.CustomSelect=function(){var e=function(e,t){this.id=e,this.ele=typeof e!="string"?$(e):$("#"+this.id),this.config={isAutoDrop:!0,placeholder:"请选择品牌",multi:!0,listContainer:".sc-select-list .sc-popup-bd"},$.extend(this.config,t),this.selected=[],this.config.onchange&&$(this).on("change",this.config.onchange),this._init(),this._defaultHeadHeight=30,this._enable=!0};return $.extend(e.prototype,{addOptions:function(e){$(this.config.listContainer,this.ele).append(e);for(var t=0;t<this.selected.length;t++)$(".sc-select-list .option[data-value='"+this.selected[t].key+"']").addClass("active")},removeSelected:function(e){this._delKey(e),this._renderSelected()},removeAllOption:function(){$(this.config.listContainer,this.ele).html("")},showOptions:function(){if(!this._enable)return;$(".sc-select-list",this.ele).removeClass("hidden"),this.ele.addClass("sc-active"),$(this).trigger("show")},hideOptions:function(){$(".sc-select-list",this.ele).addClass("hidden"),this.ele.removeClass("sc-active"),$(this).trigger("hide")},disable:function(e){$(".sc-select-content",this.ele).html("<span class='placeholder'>"+e+"</span>"),this._enable=!1},enable:function(e){this._enable=!0,this._renderSelected()}}),$.extend(e.prototype,{_init:function(e){var t=this;Souche.Util.mixin(this.config,e),this._defaultHeadHeight=$(".sc-select-hd").height(),$(".sc-selected-item",t.ele).each(function(e,n){t.selected.push({key:$(n).attr("data-value"),value:$(n).text().replace("x","")})}),this.config.multi||$(".selected_values",t.ele).val()&&(t.selected=[{key:$(".selected_values",t.ele).val(),value:$(".selected_values",t.ele).val()}]),$(document.body).on("click",function(e){$(e.target).closest(".sc-select").length||t.hideOptions()}),this._bindClick(),this._bindSelect(),this.config.multi?this._renderSelected():this._renderSingleSelected()},_bindClick:function(){function n(){var n=$(".sc-select-list",e.ele);t?($(".sc-select-list").addClass("hidden"),e.showOptions(),$(".sc-select-list",e.ele).css({top:$(".sc-select-hd",e.ele).height()+2}),e.config.isAutoDrop&&e._autoDrop(n),$(".sc-select-list",e.ele).scrollTop(0),$(n[0].parentNode).css({zIndex:Souche.Data.DropdownzIndex++})):(e.hideOptions(),n.css({top:30}))}var e=this,t=0;$(".sc-select-hd",this.ele).click(function(t){var n=$(".sc-select-list",e.ele);$(".sc-select-list",e.ele).hasClass("hidden")?($(".sc-select-list").addClass("hidden"),e.showOptions(),$(".sc-select-list",e.ele).css({top:$(".sc-select-hd",e.ele).height()+2}),e.config.isAutoDrop&&e._autoDrop(n),$(".sc-select-list",e.ele).scrollTop(0),$(n[0].parentNode).css({zIndex:Souche.Data.DropdownzIndex++})):(e.hideOptions(),n.css({top:30}))});var r,i;$(this.ele).mouseenter(function(){t=1,clearTimeout(r),clearTimeout(i),r=setTimeout(function(){n()},1e3)}).mouseleave(function(){t=0,clearTimeout(i),clearTimeout(r),i=setTimeout(function(){n()},500)})},_bindSelect:function(){var e=this;$(".sc-select-list",e.ele).on("click","a.option",function(t){t.preventDefault();var n=$(this).attr("data-value"),r=$(".value",this).html(),i=$(this);e.config.multi?(i.hasClass("active")?(e._delKey(n),i.removeClass("active"),$(e).trigger("unselect",{key:n,value:r})):(e._addKey(n,r),i.addClass("active"),$(e).trigger("select",{key:n,value:r})),e._renderSelected()):(e.selected=[{key:n,value:r}],e._renderSingleSelected()),$(e).trigger("change",{key:n,value:r}),t.stopPropagation()}),$(".sc-select-list",e.ele).on("click",function(e){e.stopPropagation()}),$(".close",e.ele).on("click",function(t){e.hideOptions()}),$(".sc-select-list",e.ele).on("scroll",function(e){e.stopPropagation()})},_delKey:function(e){var t=this;for(var n=0;n<t.selected.length;n++){var r=t.selected[n];r&&r.key==e&&t.selected.splice(n,1)}},_addKey:function(e,t){var n=this,r=!1;for(var i=0;i<n.selected.length;i++){var s=n.selected[i];s&&s.key==e&&(r=!0)}r||n.selected.push({key:e,value:t})},_renderSelected:function(){var e=this,t=[];for(var n=0;n<e.selected.length;n++)t.push(e.selected[n].key);$(".selected_values",e.ele).val(t.join(",")),$(".sc-select-content",e.ele).html("");for(var n=0;n<e.selected.length;n++){var t=e.selected[n];$(".sc-select-content",e.ele).append("<div class=sc-selected-item data-value='"+t.key+"'>"+t.value+"<i class=sc-close>x</i></div>")}$(".sc-selected-item",e.ele).on("click",function(t){var n=$(this).attr("data-value");for(var r=0;r<e.selected.length;r++){var i=e.selected[r];i&&i.key==n&&e.selected.splice(r,1)}$(e).trigger("unselect",{key:n}),e._renderSelected(),$(".sc-select-list a.option[data-value='"+n+"']",e.ele).removeClass("active"),t.stopPropagation()}),e.selected.length||$(".sc-select-content",e.ele).html("<span class='placeholder'>"+e.config.placeholder+"</span>"),$(".sc-select-list",e.ele).css({top:$(".sc-select-hd",e.ele).height()+2})},_renderSingleSelected:function(){var e=this,t=[];for(var n=0;n<e.selected.length;n++)t.push(e.selected[n].key);$(".selected_values",e.ele).val(t.join(",")),this.selected.length?(this.config.format&&(this.selected[0].value=this.config.format(this.selected[0].value)),$(".sc-select-content",this.ele).html(this.selected[0].value)):$(".sc-select-content",this.ele).html("<span class='placeholder'>"+this.config.placeholder+"</span>"),this.selected&&this.selected.length&&$(e).trigger("change",{key:this.selected[0].key,value:this.selected[0].value}),this.hideOptions()},_autoDrop:function(e){var t=this.config}}),e}(),define("souche/custom-select",[],function(){return Souche.UI.CustomSelect}),define("index/collect",[],function(){function u(e){var n=this,r=t.api_saveFavorite,s=!0;i=!0,s&&(s=!1,$.ajax({url:r,type:"POST",data:{phone:$("#fav-phone").val()||$.cookie("noregisteruser"),carType:t.carType,carId:e},context:n}).done(function(e){i=!1,e.errorMessage?alert(e.errorMessage):($("#fav-popup").addClass("hidden"),$(".wrapGrayBg").hide(),$(this).find("span").html(parseInt($(this).attr("data-num"))+1),$(this).addClass("active")),s=!1}))}function a(e){var r=this;i=!0,$.ajax({url:t.api_delFavorite,data:{carId:e},dataType:"json",type:"post",context:r,success:function(e){i=!1,e.errorMessage?alert(e.errorMessage):($(this).find("span").html(parseInt($(this).attr("data-num"))),$(this).removeClass("active")),n=!1}})}var e={},t={},n=!1,r=/^1[3458][0-9]{9}$/,i=!1,s=function(){$(".carCollect").live("click",function(){var e=this;if(i)return;return Souche.NoRegLogin.checkLogin(function(){if($(e).hasClass("active")){var t=$(e).attr("data-carid");a.call(e,t)}else{var t=$(e).attr("data-carid");u.call(e,t)}}),!1}),$("#noreg-phone-form .submit").click(function(){return $("#noreg-phone-form").submit(),!1})},o=function(e){$.extend(t,e),$(".item .itemTail .carCollect , .itemInfo .carCollect").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),s()};return e.init=o,e}),function(e,t,n,r){var i=e(t);e.fn.lazyload=function(n){function s(){var t=0;o.each(function(){var n=e(this);if(f.skip_invisible&&!n.is(":visible"))return;if(!e.abovethetop(this,f)&&!e.leftofbegin(this,f))if(!e.belowthefold(this,f)&&!e.rightoffold(this,f))n.trigger("appear"),t=0;else if(++t>f.failure_limit)return!1})}var o=this,u,f={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return n&&(r!==n.failurelimit&&(n.failure_limit=n.failurelimit,delete n.failurelimit),r!==n.effectspeed&&(n.effect_speed=n.effectspeed,delete n.effectspeed),e.extend(f,n)),u=f.container===r||f.container===t?i:e(f.container),0===f.event.indexOf("scroll")&&u.bind(f.event,function(e){return s()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,n.one("appear",function(){if(!this.loaded){if(f.appear){var r=o.length;f.appear.call(t,r,f)}e("<img />").bind("load",function(){n.hide().attr("src",n.data(f.data_attribute))[f.effect](f.effect_speed),t.loaded=!0;var r=e.grep(o,function(e){return!e.loaded});o=e(r);if(f.load){var i=o.length;f.load.call(t,i,f)}}).attr("src",n.data(f.data_attribute))}}),0!==f.event.indexOf("scroll")&&n.bind(f.event,function(e){t.loaded||n.trigger("appear")})}),i.bind("resize",function(e){s()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent.persisted&&o.each(function(){e(this).trigger("appear")})}),e(t).load(function(){s()}),this},e.belowthefold=function(n,s){var o;return s.container===r||s.container===t?o=i.height()+i.scrollTop():o=e(s.container).offset().top+e(s.container).height(),o<=e(n).offset().top-s.threshold},e.rightoffold=function(n,s){var o;return s.container===r||s.container===t?o=i.width()+i.scrollLeft():o=e(s.container).offset().left+e(s.container).width(),o<=e(n).offset().left-s.threshold},e.abovethetop=function(n,s){var o;return s.container===r||s.container===t?o=i.scrollTop():o=e(s.container).offset().top,o>=e(n).offset().top+s.threshold+e(n).height()},e.leftofbegin=function(n,s){var o;return s.container===r||s.container===t?o=i.scrollLeft():o=e(s.container).offset().left,o>=e(n).offset().left+s.threshold+e(n).width()},e.inviewport=function(t,n){return!e.rightoffold(t,n)&&!e.leftofbegin(t,n)&&!e.belowthefold(t,n)&&!e.abovethetop(t,n)},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("lib/lazyload",function(){}),define("index/carConstrast",[],function(){function s(e){var t=n.api_deleteContrast,r=this;$.ajax({url:t,data:{cid:e},dataType:"json",context:r}).done(function(e){$(this).parent().find("input")[0].checked=!1})}function o(e){var t=n.api_addContrast,r=this,i=!0;i&&$.ajax({type:"POST",url:n.api_addContrast,data:{carId:e},dataType:"json",context:r}).done(function(e){if(e.result==2){this.checked=!0,$(this).parent().find("input")[0].checked=!0;var t=e.contrastId;$(this).parent().attr("contrastId",t);var n=$(this).parent().clone();n.css({opacity:.8,position:"absolute",top:$(this).parent().offset().top+"px",left:$(this).parent().offset().left+"px",backgroundColor:"#FF4400",color:"#fff"});var r=$(".side-box .contrast-img").offset().left,s=$(".side-box .contrast-img").offset().top;document.body.appendChild(n[0]),n.animate({top:s,left:r},500,function(){n.remove()})}else if(e.result==-1){this.checked=!0;var o=$(this).parent().parent().parent().find(".contrast-waring");o.html("已经加入对比").removeClass("hidden"),$(this).parent().find("input")[0].checked=!0,window.setTimeout(function(){o.addClass("hidden")},3e3);var t=e.contrastId;$(this).parent().attr("contrastId",t)}else if(e.result==1){var o=$(this).parent().parent().parent().find(".contrast-waring");o.html("对比项已满").removeClass("hidden"),$(this).parent().find("input")[0].checked=!1,window.setTimeout(function(){o.addClass("hidden")},3e3)}i=!1})}var e={},t=!1,n={},r=/^1[3458][0-9]{9}$/,i=function(){$(".carConstrast span,.carConstrast input").live("click",function(e){var t=e.target||e.srcElement;if(t.nodeName=="INPUT")if(this.checked){var n=$(this).parent().attr("carid");o.call(this,n)}else{var r=$(this).parent().attr("contrastid");s.call(this,r)}else if(t.nodeName=="SPAN")if($(this).parent().find("input")[0].checked){var r=$(this).parent().attr("contrastid");s.call(this,r)}else{var n=$(this).parent().attr("carid"),i=$(this).parent().find("input")[0];o.call(i,n),i.checked=!0}e.stopPropagation(),e.preventDefault()})},u=function(e){$.extend(n,e),i()};return e.init=u,e}),define("index_v2",["index/car-god","index/top-nav","index/qiugou_v2","souche/custom-select","index/collect","lib/lazyload","index/carConstrast"],function(e,t,n,r,i,s,o){var u={},a=1,f=1,l=function(){var e=null,t=!1,n=!1,r=function(e){$("."+$("#carsNav li.active").attr("id")+".carsMore span").html("正在获取");var r=this;if($(this).hasClass("myAdviser-more")||e=="myAdviser"){if(t)return;a++;var s=u.getMoreUserRecommend_api+"="+a;$(r).find("span").html("正在加载中..."),a>2&&$(".myAdviser-loading").removeClass("hidden"),$.ajax({url:s,type:"GET",dataType:"json"}).done(function(e){$(r).find("span").html("查看更多"),$(".myAdviser-loading").addClass("hidden"),$(".carsMore.myAdviser-more").remove();if(e.code!=204){var n=e.recommendCars;if(e.hasNext){var n=e.recommendCars.items,s="";for(var o=0,u=n.length;o<u;o++)s+='<div class="carsItem carItem"><a href="#" class="carImg"><img src=\'http://res.souche.com/'+(n[o].carPicturesVO||{}).pictureBig+"' ></a><a href='#' class='car-link'>"+n[o].carVo.carOtherAllName+"</a>"+"<div class='info'><span class='price'>￥"+n[o].carVo.salePriceToString+"万</span><span class='shangpai'>上牌："+n[o].carVo.firstLicensePlateDateShow+"</span></div>"+"<div class='other'>"+"<div title='"+n[o].recommendReasonStr+"' class='recommended'><span class='"+(n[o].recommendReasonStr?"":"hidden")+"' >推荐理由："+n[o].recommendReasonStr+"</span></div>"+"</div>"+"<div class='carTail clearfix'>"+"<a data-carid='"+n[o].id+"' data-num='"+n[o].count+"' class='collect carCollect "+(n[o].favorite?"active":"")+"'>收藏<span>"+n[o].count+"</span></a>"+"<span class='recommendedToday'>"+n[o].recommendTime+"</span></div>"+"</div>";$(".myAdviserContent .myAdviser").eq(0).append(s),$(".myAdviserContent .myAdviser-more").remove()}else t=!0}i=!0})}else{if(n)return;f++;var s=u.getMoreHotCars_api+f;$(r).find("span").html("正在加载中..."),f>2&&$(".hotNewCars-loading").removeClass("hidden"),$.ajax({url:s,type:"GET",dataType:"json"}).done(function(e){$(r).find("span").html("查看更多"),$(".hotNewCars-loading").addClass("hidden"),$(".carsMore.hotNewCars-more").remove();if(e.code!=204){var t=e.newCars.items;if(t.length==0)n=!0;else{var s="";for(var o=0,u=t.length;o<u;o++)s+="<div class='carsItem carItem'><a href='#' class='carImg'><img src='http://res.souche.com/"+(t[o].carPicturesVO||{}).pictureBig+"' ></a><a href='#' class='car-link'>"+t[o].carVo.carOtherAllName+"</a>"+"<div class='info'><span class='price'>￥"+(t[o].limitSpec||t[o].price)+"万</span><span class='shangpai'>上牌："+t[o].carVo.firstLicensePlateDateShow+"</span></div>"+"<div class='other'>"+"<div title='"+t[o].recommendReasonStr+"' class='recommended'><span class='"+(t[o].recommendReasonStr?"":"hidden")+"' >推荐理由："+t[o].recommendReasonStr+"</span></div>"+"</div>"+"<div class='carTail clearfix'>"+"<a data-carid='"+t[o].id+"' data-num='"+t[o].count+"' class='collect carCollect "+(t[o].favorite?"active":"")+"'>收藏<span>"+t[o].count+"</span></a>"+"<div class='carConstrast' contrastid='"+t[o].contrastId+"' carid='"+t[o].id+"'><input type='checkbox'  "+(t[o].contrastId?"checked":"")+"><span>加入对比</span></div>"+"<div class='contrast-waring hidden'>对比栏已满！你可以删除不需要的车辆，再继续添加。</div></div></div>";$(".hotNewCarsContent .hotNewCars").eq(0).append(s)}}i=!0})}},i=!0;$(".carsMore").click(function(){r.call(this);var e=this;$(window).scroll(function(){$("."+$("#carsNav li.active").attr("id")+" .carsMore").length==0&&$("#footer").offset().top-600<=$(window).scrollTop()+$(window).height()&&i&&(i=!1,r($("#carsNav li.active").attr("id")))})})},c=function(e,t){var n=e,r={endYear:n.attr("endYear"),endMonth:n.attr("endMonth"),endDay:n.attr("endDay"),endHour:n.attr("endHour"),serverYear:n.attr("serverYear"),serverMonth:n.attr("serverMonth"),serverDay:n.attr("serverDay"),serverHour:n.attr("serverHour"),serverMin:n.attr("serverMin"),serverSec:n.attr("serverSec"),offHour:0,offMin:0,offSec:0,offMSec:0},i=function(){var e="",t="",i="";r.offHour<10&&(e="0"),r.offMin<10&&(t="0"),r.offSec<10&&(i="0"),n.html("<span>剩余时间：<ins>"+e+r.offHour+"</ins>&nbsp时&nbsp<ins>"+t+r.offMin+"</ins>&nbsp分&nbsp<ins>"+i+r.offSec+"."+r.offMSec+"</ins>&nbsp秒</span>")},s=function(){var e=new Date(r.endYear,r.endMonth,r.endDay,r.endHour,0,0),n=new Date(r.serverYear,r.serverMonth,r.serverDay,r.serverHour,r.serverMin,r.serverSec);t&&(e=t.endDate,n=t.startDate);var s=Date.parse(e)-Date.parse(n);if(s<0)return r.offMSec=0,r.offSec=0,r.offMin=0,r.offHour=0,i(),!1;r.offHour=Math.floor(s/36e5);var o=s%36e5;r.offMin=Math.floor(o/6e4);var u=o%6e4;r.offSec=Math.floor(u/1e3),i()};s();var o=setInterval(function(){--r.offMSec,r.offMSec<0&&(r.offMSec=9,--r.offSec,r.offSec<0&&(r.offSec=59,--r.offMin,r.offMin<0&&(r.offMin=59,--r.offHour,r.offHour<0&&(clearInterval(o),r.offSec=0,r.offMin=0,r.offHour=0)))),i()},100)};return{init:function(s){$.extend(u,s),$(document).ready(function(){$(".flexslider").flexslider({animation:"slide",slideshowSpeed:5e3,directionNav:!0,controlNav:!0,pauseOnHover:!0}),$(".right-slide").flexslider({slideshow:!1,animation:"slide",slideshowSpeed:5e3,controlNav:!0,animationLoop:!1,randomize:!0,directionNav:!1}),$(".flex-direction-nav").hide(),$(".main-slider").mouseenter(function(){$(".flex-direction-nav").fadeIn("normal")}),$(".main-slider").mouseleave(function(){$(".flex-direction-nav").fadeOut("normal")})}),l(),e.init(),t.init(),n.init(u),o.init(u);var a=new r("age_select",{placeholder:"请选择",multi:!1}),a=new r("age_select_high",{placeholder:"请选择",multi:!1}),a=new r("age_select_1",{placeholder:"请选择",multi:!1}),a=new r("age_select_high_1",{placeholder:"请选择",multi:!1});$(".down-counter").each(function(){var e=$(this);c(e)}),setInterval(function(){$(".low-price").each(function(e,t){$(t).val($(t).val().replace(/[^0-9]/,""))}),$(".high-price").each(function(e,t){$(t).val($(t).val().replace(/[^0-9]/,""))})},200),i.init(u),$(".carsContent img").lazyload({threshold:200}),$(".card-login").click(function(){Souche.MiniLogin.checkLogin(function(){window.location.reload()})})}}});