/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2012 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.8.3
 *
 */

define("index/car-god",[],function(){var e={init:function(){var e=150,t=$("#qa .cheshen-box .cheshen-detail:eq(0)"),n=0;$("#qa .cheshen-box .cheshen-detail").each(function(e,t){$(t).attr("data-index",e)}),$("#qa .cheshen-box .cheshen-detail").css({height:0}),$("#qa .cheshen-box .cheshen-detail:eq(0)").css({height:e});var r=!1;$("#qa .cheshen-box").on("mouseover",function(){var i=$(this).find(".cheshen-detail"),s=i.attr("data-index");!r&&n!=s&&(t.animate({height:0},400),r=!0,setTimeout(function(){r=!1},500),$(this).find(".cheshen-detail").animate({height:e},400),$("#qa .show").removeClass("close"),$(this).find(".show").addClass("close"),t=i,n=s)})}};return e}),define("index/top-nav",[],function(){var e={init:function(){$(".nav-item").each(function(e,t){var n=$(t).find(".nav-inner");$(n).css({opacity:0}).removeClass("hidden"),$(n).attr("data-height",$(n).height()).addClass("hidden");var r=$(t).width(),i=$(t).height(),s=n.width();$(t).attr("data-width",r),$(t).attr("data-height",i),$(t).attr("data-innerWidth",s)});var e={},t=10001;$(".nav-item").mouseenter(function(n){var r=$(this).attr("data-name");e[r]=!0;var i=this;setTimeout(function(){if(!e[r])return;var n=$(i).attr("data-width"),s=$(i).attr("data-height"),o=$(i).find(".nav-inner");o.removeClass("hidden"),$(i).css("zIndex",++t);var u=o.attr("data-height");o.attr("data-height",u),o.css({width:n,height:s,opacity:1}).animate({width:$(i).attr("data-innerWidth"),height:u,opacity:1},400)},200)}).mouseleave(function(){var t=$(this).attr("data-name");e[t]=!1;var n=this,r=$(n).attr("data-width"),i=$(n).attr("data-height"),s=$(n).find(".nav-inner"),o=s.attr("data-height");s.animate({width:r,height:i,opacity:1},300,function(){s.css({height:o}).addClass("hidden")})}),$(document.body).on("touchstart",function(){$(".nav-inner").addClass("hidden")})}};return e}),define("souche/util/sc-db",[],function(){var e=function(e){this.namespace=(e||"souche")+"_"},t={valueToArray:function(e){return e==null?[]:e.splice&&e.length?e:[e]}};return e.prototype={get:function(e,t){e=this.namespace+e;var n=localStorage.getItem(e),r=JSON.parse(n);n=r.data;var i=r.time;return t&&(new Date).getTime()-i>t?null:n.length?n[0]:(n=null,n)},set:function(e,n){e=this.namespace+e,n=t.valueToArray(n);try{localStorage.setItem(e,JSON.stringify({time:(new Date).getTime(),data:n}))}catch(r){}},gets:function(e,t){e=this.namespace+e;var n=localStorage.getItem(e),r=JSON.parse(n);n=r.data;var i=r.time;return t&&(new Date).getTime()-i>t?null:n},sets:function(e,n){e=this.namespace+e,n=t.valueToArray(n);try{localStorage.setItem(e,JSON.stringify({time:(new Date).getTime(),data:n}))}catch(r){}},add:function(e,n){var r=this.gets(e),n=t.valueToArray(n);r?r=r.concat(n):n&&(r=n),this.sets(e,r)},del:function(e){e=this.namespace+e,localStorage.setItem(e,"")}},e}),define("souche/util/load-info",["souche/util/sc-db"],function(e){var t="BRAND_CACHE_KEY",n="SERIES_CACHE_KEY",r="PROVINCE_CACHE_KEY",i="CITY_CACHE_KEY",s=new e("LOADINFO");return{loadBrands:function(e){var n=null;try{n=s.get(t)}catch(r){}$.ajax({url:contextPath+"/pages/dicAction/loadRootLevel.json",dataType:"json",data:{type:"car-subdivision"},success:function(n){s.set(t,n),e(n)},error:function(){},failure:function(){}})},loadSeries:function(e,t){var r=null;try{r=s.get(n+e)}catch(i){}$.ajax({url:contextPath+"/pages/dicAction/loadRootLevelForCar.json",dataType:"json",data:{type:"car-subdivision",code:e},success:function(r){s.set(n+e,r),t(r)},error:function(){},failure:function(){}})},loadProvince:function(e){var t=null;try{t=s.get(r)}catch(n){}$.ajax({url:contextPath+"/pages/dicAction/loadRootLevel.json?type=area",dataType:"json",data:{type:"area"},success:function(t){s.set(r,t),e(t)},error:function(){},failure:function(){}})},loadCity:function(e,t){var n=null;try{n=s.get(i)}catch(r){}$.ajax({url:contextPath+'/pages/dicAction/loadRootLevel.json?request_message={"code":"'+e+'","type":"area"}',dataType:"json",data:{},success:function(e){s.set(i,e),t(e)},error:function(){},failure:function(){}})}}}),define("index/mod/rss-addSeries",["souche/util/load-info"],function(e){var t=function(e,t,n){var r={};for(var i=0,s=e.length;i<s;i++){var o=t.call(n||window,e[i]);r[o]?r[o].push(e[i]):r[o]=[e[i]]}return r},n={},r=[],i=!1;return{selectedSeries:[],selectedBrands:[],init:function(e){var t=this;$.extend(n,e),n.userRequementJson.series&&(this.selectedSeries=n.userRequementJson.series),n.userRequementJson.brands&&(this.selectedBrands=n.userRequementJson.brands)},show:function(){i||(this._createAtoZ(),this._createBrands(),this._bind(),$(".brandList li").eq(0).find("a").click()),r=[];for(var e=0;e<this.selectedSeries.length;e++)r.push(this.selectedSeries[e]);$(".brandList li").eq(0).find("a").click(),$(".addInstrestCar").removeClass("hidden").css({opacity:0}).animate({opacity:1},200),this._renderSelected()},delSeries:function(e){if(e.indexOf("brand")!=-1)for(var t=0;t<this.selectedBrands.length;t++){var n=this.selectedBrands[t].split(","),r=n[0];if(r==e){this.selectedBrands.splice(t,1);break}}else{for(var t=0;t<this.selectedSeries.length;t++){var i=this.selectedSeries[t].split(","),r=i[0];if(r==e){this.selectedSeries.splice(t,1);break}}$(".chexiContent .series-item").each(function(t,n){$(n).attr("code")==e&&$(n).removeClass("active")})}$(this).trigger("change",{selectedSeries:this.selectedSeries,selectedBrands:this.selectedBrands}),this._renderSelected()},_bind:function(){var e=this;$("#J_addSeries_submit").on("click",function(){$(".addInstrestCar").animate({opacity:0},200,function(){$(".addInstrestCar").addClass("hidden")}),$(e).trigger("submit",{selectedSeries:e.selectedSeries})}),$("#J_addSeries_cancel").on("click",function(){$(".addInstrestCar").animate({opacity:0},200,function(){$(".addInstrestCar").addClass("hidden")}),e.selectedSeries=[];for(var t=0;t<r.length;t++)e.selectedSeries.push(r[t]);e._renderSelected(),$(e).trigger("change",{selectedSeries:e.selectedSeries,selectedBrands:e.selectedBrands}),$(e).trigger("cancel")}),$("#J_selected_series").on("click",".selected-item",function(){e.delSeries($(this).attr("code"))})},_createAtoZ:function(){var e="ABCDFGHJKLMNOQRSTWXYZ",t="";for(var n=0;n<e.length;n++)t+="<a data-id='"+e[n]+"'>"+e[n]+"</a>";$(".brandNav").html(t)},_createBrands:function(){var n=this;e.loadBrands(function(e){var r=t(e.items,function(e){return e.name.split(" ")[0]}),i="";for(var s in r)if(r.hasOwnProperty(s)){i+="<li><span data-id='"+s+"'>"+s+"</span>";for(var o in r[s])r[s].hasOwnProperty(o)&&(i+="<a code='"+r[s][o].code+"'><img src='http://res.souche.com/files/carproduct/brand/"+r[s][o].code+".png'/>"+r[s][o].enName+"</a>");i+="</li>"}$(".addInstrestCarContent .brandList ul").html(i),$(".addInstrestCarContent .brandList ul a").on("click",function(){$(".addInstrestCarContent .brandList ul a").removeClass("active"),$(this).addClass("active"),n._loadSeries($(this).attr("code"))}),$(".brandNav a").live("click",function(){var e=$(this).attr("data-id");if(!$(".brandList span[data-id='"+e+"']").offset())return!1;var t=$(".brandList span[data-id='"+e+"']").offset().top-$(".brandList span").eq(0).offset().top;return $(".brandList").animate({scrollTop:t}),!1})})},_loadSeries:function(t){var n=this;e.loadSeries(t,function(e){var t="";for(var r in e.codes){t+="<li>",t+="<h1>"+r+"</h1>";for(var i=0;i<e.codes[r].length;i++){var s=e.codes[r][i];n._isInSelected(s.code)?t+="<div class='series-item active' code='"+s.code+"' ><i></i><img src='http://res.souche.com/files/carproduct/series/"+s.code+".png'/>"+s.name+"</div>":t+="<div class='series-item' code='"+s.code+"'><i></i><img src='http://res.souche.com/files/carproduct/series/"+s.code+".png'/>"+s.name+"</div>"}}$(".chexi .chexiContent ul").html(t),$(".chexi .chexiContent .series-item").on("click",function(){$(this).hasClass("active")?($(this).removeClass("active"),n.delSeries($(this).attr("code")),$(n).trigger("change",{selectedSeries:n.selectedSeries,selectedBrands:n.selectedBrands}),n._renderSelected()):($(this).addClass("active"),n._addSelected($(this).attr("code"),$(this).text()),$(n).trigger("change",{selectedSeries:n.selectedSeries,selectedBrands:n.selectedBrands}),n._renderSelected())})})},_isInSelected:function(e){var t=!1;for(var n=0;n<this.selectedSeries.length;n++){var r=this.selectedSeries[n].split(","),i=r[0];i==e&&(t=!0)}return t},_addSelected:function(e,t){this._isInSelected(e)||this.selectedSeries.push(e+","+t)},_renderSelected:function(){var e="";for(var t=0;t<this.selectedSeries.length;t++){var n=this.selectedSeries[t].split(","),r=n[0],i=n[1];e+="<div class='selected-item' code='"+r+"'><img src='http://res.souche.com/files/carproduct/series/"+r+".png'/>"+i+"</div>"}for(var t=0;t<this.selectedBrands.length;t++){var n=this.selectedBrands[t].split(","),r=n[0],i=n[1];e+="<div class='selected-item' code='"+r+"'><img src='http://res.souche.com/files/carproduct/brand/"+r+".png'/>"+i+"</div>"}$(".selected-series").html(e)}}}),define("souche/util/num-animate",[],function(){return{animateInnerHTML:function(e,t){var n=e.html(),r=n.replace(/[^-0-9]/g,""),i=t.replace(/[^-0-9]/g,"");r!==""&&i!==""?(r*=1,i*=1,r-i>50||r-i<-50?e.html(t):r<i?setTimeout(function(){r<i&&(r++,e.html(n.replace(/[-0-9]+/g,r)),setTimeout(arguments.callee,10))},10):setTimeout(function(){r>i&&(r--,e.html(n.replace(/[-0-9]+/g,r)),setTimeout(arguments.callee,10))},10)):e.html(t)},animateValue:function(e,t){}}}),define("souche/custom-select",["souche/util/num-animate"],function(e){return Souche.UI.CustomSelect=function(){var t=function(e,t){this.id=e,this.ele=typeof e!="string"?$(e):$("#"+this.id),this.config={isAutoDrop:!0,placeholder:"请选择品牌",multi:!0,listContainer:".sc-select-list .sc-popup-bd"},$.extend(this.config,t),this.selected=[],this.config.onchange&&$(this).on("change",this.config.onchange),this._init(),this._defaultHeadHeight=30,this._enable=!0};return $.extend(t.prototype,{addOptions:function(e){$(this.config.listContainer,this.ele).append(e);for(var t=0;t<this.selected.length;t++)$(".sc-select-list .option[data-value='"+this.selected[t].key+"']").addClass("active")},setSelected:function(e){this.config.multi?this.selected.push({key:e,value:e}):this.selected=[{key:e,value:e}],$(self).trigger("change",{key:e,value:e}),this._renderSelected()},removeSelected:function(e){this._delKey(e),this._renderSelected()},removeAllOption:function(){$(this.config.listContainer,this.ele).html("")},showOptions:function(){if(!this._enable)return;$(".sc-select-list",this.ele).removeClass("hidden"),this.ele.addClass("sc-active"),$(this).trigger("show")},hideOptions:function(){$(".sc-select-list",this.ele).addClass("hidden"),this.ele.removeClass("sc-active"),$(this).trigger("hide")},disable:function(e){$(".sc-select-content",this.ele).html("<span class='placeholder'>"+e+"</span>"),this._enable=!1},enable:function(e){this._enable=!0,this._renderSelected()}}),$.extend(t.prototype,{_init:function(e){var t=this;Souche.Util.mixin(this.config,e),this._defaultHeadHeight=$(".sc-select-hd").height(),$(".sc-selected-item",t.ele).each(function(e,n){t.selected.push({key:$(n).attr("data-value"),value:$(n).text().replace("x","")})}),this.config.multi||$(".selected_values",t.ele).val()&&(t.selected=[{key:$(".selected_values",t.ele).val(),value:$(".selected_values",t.ele).val()}]),$(document.body).on("click",function(e){$(e.target).closest(".sc-select").length||t.hideOptions()}),this._bindClick(),this._bindSelect(),this.config.multi?this._renderSelected():this._renderSingleSelected()},_bindClick:function(){function n(){var n=$(".sc-select-list",e.ele);t?($(".sc-select-list").addClass("hidden"),e.showOptions(),$(".sc-select-list",e.ele).css({top:$(".sc-select-hd",e.ele).height()+2}),e.config.isAutoDrop&&e._autoDrop(n),$(".sc-select-list",e.ele).scrollTop(0),$(n[0].parentNode).css({zIndex:Souche.Data.DropdownzIndex++})):(e.hideOptions(),n.css({top:30}))}var e=this,t=0;$(".sc-select-hd",this.ele).click(function(t){var n=$(".sc-select-list",e.ele);$(".sc-select-list",e.ele).hasClass("hidden")?($(".sc-select-list").addClass("hidden"),e.showOptions(),$(".sc-select-list",e.ele).css({top:$(".sc-select-hd",e.ele).height()+2}),e.config.isAutoDrop&&e._autoDrop(n),$(".sc-select-list",e.ele).scrollTop(0),$(n[0].parentNode).css({zIndex:Souche.Data.DropdownzIndex++})):(e.hideOptions(),n.css({top:30}))});var r,i;$(this.ele).mouseenter(function(){t=1,clearTimeout(r),clearTimeout(i),r=setTimeout(function(){n()},1e3)}).mouseleave(function(){t=0,clearTimeout(i),clearTimeout(r),i=setTimeout(function(){n()},500)})},_bindSelect:function(){var e=this;$(".sc-select-list",e.ele).on("click","a.option",function(t){t.preventDefault();var n=$(this).attr("data-value"),r=$(".value",this).html(),i=$(this);e.config.multi?(i.hasClass("active")?(e._delKey(n),i.removeClass("active"),$(e).trigger("unselect",{key:n,value:r})):(e._addKey(n,r),i.addClass("active"),$(e).trigger("select",{key:n,value:r})),e._renderSelected()):(e.selected=[{key:n,value:r}],e._renderSingleSelected()),$(e).trigger("change",{key:n,value:r}),t.stopPropagation()}),$(".sc-select-list",e.ele).on("click",function(e){e.stopPropagation()}),$(".close",e.ele).on("click",function(t){e.hideOptions()}),$(".sc-select-list",e.ele).on("scroll",function(e){e.stopPropagation()})},_delKey:function(e){var t=this;for(var n=0;n<t.selected.length;n++){var r=t.selected[n];r&&r.key==e&&t.selected.splice(n,1)}},_addKey:function(e,t){var n=this,r=!1;for(var i=0;i<n.selected.length;i++){var s=n.selected[i];s&&s.key==e&&(r=!0)}r||n.selected.push({key:e,value:t})},_renderSelected:function(){var e=this,t=[];for(var n=0;n<e.selected.length;n++)t.push(e.selected[n].key);$(".selected_values",e.ele).val(t.join(",")),$(".sc-select-content",e.ele).html("");for(var n=0;n<e.selected.length;n++){var t=e.selected[n];$(".sc-select-content",e.ele).append("<div class=sc-selected-item data-value='"+t.key+"'>"+t.value+"<i class=sc-close>x</i></div>")}$(".sc-selected-item",e.ele).on("click",function(t){var n=$(this).attr("data-value");for(var r=0;r<e.selected.length;r++){var i=e.selected[r];i&&i.key==n&&e.selected.splice(r,1)}$(e).trigger("unselect",{key:n}),e._renderSelected(),$(".sc-select-list a.option[data-value='"+n+"']",e.ele).removeClass("active"),t.stopPropagation()}),e.selected.length||$(".sc-select-content",e.ele).html("<span class='placeholder'>"+e.config.placeholder+"</span>"),$(".sc-select-list",e.ele).css({top:$(".sc-select-hd",e.ele).height()+2})},_renderSingleSelected:function(){var t=this,n=[];for(var r=0;r<t.selected.length;r++)n.push(t.selected[r].key);$(".selected_values",t.ele).val(n.join(",")),this.selected.length?(this.config.format&&(this.selected[0].value=this.config.format(this.selected[0].value)),e.animateInnerHTML($(".sc-select-content",this.ele),this.selected[0].value)):$(".sc-select-content",this.ele).html("<span class='placeholder'>"+this.config.placeholder+"</span>"),this.selected&&this.selected.length&&$(t).trigger("change",{key:this.selected[0].key,value:this.selected[0].value}),this.hideOptions()},_autoDrop:function(e){var t=this.config}}),t}(),Souche.UI.CustomSelect}),define("index/qiugou",["index/mod/rss-addSeries","souche/custom-select"],function(e,t){var n={brands:[],series:[],startYear:null,endYear:null,minPrice:null,maxPrice:null},r,i,s,o,u={};return{init:function(t){$.extend(u,t),e.init(t),this._initData(t.userRequementJson),this._bind(),t.userRequementJson.series&&this._renderSelected(t.userRequementJson.series,t.userRequementJson.brands),this._initSelect()},_initSelect:function(){r=new t("age_select",{placeholder:"请选择",multi:!1}),$(r).on("change",function(e,t){n.startYear=t.value}),i=new t("age_select_high",{placeholder:"请选择",multi:!1}),$(i).on("change",function(e,t){n.endYear=t.value}),s=new t("price_select",{placeholder:"请选择",multi:!1}),$(s).on("change",function(e,t){if(t.key==-1){$(".select_dataContainer").addClass("hidden"),$(".input_dataContainer").removeClass("hidden");return}t.value=t.value.replace(/[^0-9]/g,""),n.minPrice=t.value,$(".low-price").val(n.minPrice)}),o=new t("price_select_high",{placeholder:"请选择",multi:!1}),$(o).on("change",function(e,t){if(t.key==-1){$(".select_dataContainer").addClass("hidden"),$(".input_dataContainer").removeClass("hidden");return}t.value=t.value.replace(/[^0-9]/g,""),n.maxPrice=t.value,$(".high-price").val(n.maxPrice)}),setInterval(function(){$(".low-price").each(function(e,t){/[^0-9]/.test($(t).val())&&$(t).val($(t).val().replace(/[^0-9]/,""))}),$(".high-price").each(function(e,t){/[^0-9]/.test($(t).val())&&$(t).val($(t).val().replace(/[^0-9]/,""))})},200)},_initData:function(e){if(e.brands&&e.brands.length)for(var t=0;t<e.brands.length;t++){var r=e.brands[t].split(","),i=r[0];n.brands.push(i)}if(e.series&&e.series.length)for(var t=0;t<e.series.length;t++){var r=e.series[t].split(","),i=r[0];n.series.push(i)}e.startYear&&(n.startYear=e.startYear),e.endYear&&(n.endYear=e.endYear),e.minPrice&&(n.startYear=e.minPrice),e.maxPrice&&(n.startYear=e.maxPrice)},_bind:function(){var t=this;$(".addCarinstrestItem").on("click",function(){e.show()}),$(e).on("change",function(e,r){n.series=[];for(var i=0;i<r.selectedSeries.length;i++){var s=r.selectedSeries[i].split(","),o=s[0];n.series.push(o)}n.brands=[];for(var i=0;i<r.selectedBrands.length;i++){var s=r.selectedBrands[i].split(","),o=s[0];n.brands.push(o)}t._renderSelected(r.selectedSeries,r.selectedBrands)}),$(".selected_series_result").on("click",".selected-item",function(){e.delSeries($(this).attr("code"))});var r=!1;$("#J_xuqiu_submit").on("click",function(){if(r)return;n.minPrice=$(".low-price").val(),n.maxPrice=$(".high-price").val();if(!(n.brands.length||n.series.length||n.endYear||n.startYear||n.minPrice||n.maxPrice)){$(".trail .warning").html("请至少填写一项").removeClass("hidden");return}if(n.startYear&&n.endYear&&n.minYear>n.maxYear){$(".trail .warning").html("年份选择错误").removeClass("hidden");return}if(n.minPrice&&n.maxPrice&&n.minYear>n.maxYear){$(".trail .warning").html("预算填写错误").removeClass("hidden");return}r=!0,$(this).addClass("loading").html("提交中"),$.ajax({url:u.submit_api,data:{brands:n.brands.join(","),series:n.series.join(","),minYear:n.startYear,maxYear:n.endYear,minPrice:n.minPrice,maxPrice:n.maxPrice},dataType:"json",success:function(e){window.location.reload()},error:function(){r=!1}})});if($(".dialogContentContainer").hasClass("hidden")){$(".dialogContentContainer").css({opacity:0}).removeClass("hidden");var i=$(".dialogContentContainer").width();$(".dialogContentContainer").css({opacity:1}).addClass("hidden")}else var i=$(".dialogContentContainer").width();$("#J_card_edit").click(function(){$(".dialogContentContainer").css({width:200}).removeClass("hidden").animate({width:i,opacity:1},500)}),$("#J_xuqiu_cancel").click(function(){$(".dialogContentContainer").animate({width:200,opacity:0},500,function(){$(".dialogContentContainer").addClass("hidden")})})},_renderSelected:function(e,t){var n="";for(var r=0;r<e.length;r++){var i=e[r].split(","),s=i[0],o=i[1];n+="<div class='selected-item' code='"+s+"'><img src='http://res.souche.com/files/carproduct/series/"+s+".png'/>"+o+"</div>"}for(var r=0;r<t.length;r++){var i=t[r].split(","),s=i[0],o=i[1];n+="<div class='selected-item' code='"+s+"'><img src='http://res.souche.com/files/carproduct/brand/"+s+".png'/>"+o+"</div>"}$(".selected_series_result").html(n)}}}),define("index/collect",[],function(){function u(e){var n=this,r=t.api_saveFavorite,s=!0;i=!0,s&&(s=!1,$.ajax({url:r,type:"POST",data:{phone:$("#fav-phone").val()||$.cookie("noregisteruser"),carType:t.carType,carId:e},context:n}).done(function(e){i=!1,e.errorMessage?alert(e.errorMessage):($("#fav-popup").addClass("hidden"),$(".wrapGrayBg").hide(),$(this).find("span").html($(this).find("span").html()*1+1),$(this).addClass("active")),s=!1}))}function a(e){var r=this;i=!0,$.ajax({url:t.api_delFavorite,data:{carId:e},dataType:"json",type:"post",context:r,success:function(e){i=!1,e.errorMessage?alert(e.errorMessage):($(this).find("span").html($(this).find("span").html()*1-1),$(this).removeClass("active")),n=!1}})}var e={},t={},n=!1,r=/^1[3458][0-9]{9}$/,i=!1,s=function(){$(".carCollect").live("click",function(){var e=this;if(i)return;return Souche.NoRegLogin.checkLogin(function(){if($(e).hasClass("active")){var t=$(e).attr("data-carid");a.call(e,t)}else{var t=$(e).attr("data-carid");u.call(e,t)}}),!1}),$("#noreg-phone-form .submit").click(function(){return $("#noreg-phone-form").submit(),!1})},o=function(e){$.extend(t,e),$(".item .itemTail .carCollect , .itemInfo .carCollect").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),s()};return e.init=o,e}),function(e,t,n,r){var i=e(t);e.fn.lazyload=function(n){function s(){var t=0;o.each(function(){var n=e(this);if(f.skip_invisible&&!n.is(":visible"))return;if(!e.abovethetop(this,f)&&!e.leftofbegin(this,f))if(!e.belowthefold(this,f)&&!e.rightoffold(this,f))n.trigger("appear"),t=0;else if(++t>f.failure_limit)return!1})}var o=this,u,f={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return n&&(r!==n.failurelimit&&(n.failure_limit=n.failurelimit,delete n.failurelimit),r!==n.effectspeed&&(n.effect_speed=n.effectspeed,delete n.effectspeed),e.extend(f,n)),u=f.container===r||f.container===t?i:e(f.container),0===f.event.indexOf("scroll")&&u.bind(f.event,function(e){return s()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,n.one("appear",function(){if(!this.loaded){if(f.appear){var r=o.length;f.appear.call(t,r,f)}e("<img />").bind("load",function(){n.hide().attr("src",n.data(f.data_attribute))[f.effect](f.effect_speed),t.loaded=!0;var r=e.grep(o,function(e){return!e.loaded});o=e(r);if(f.load){var i=o.length;f.load.call(t,i,f)}}).attr("src",n.data(f.data_attribute))}}),0!==f.event.indexOf("scroll")&&n.bind(f.event,function(e){t.loaded||n.trigger("appear")})}),i.bind("resize",function(e){s()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent.persisted&&o.each(function(){e(this).trigger("appear")})}),e(t).load(function(){s()}),this},e.belowthefold=function(n,s){var o;return s.container===r||s.container===t?o=i.height()+i.scrollTop():o=e(s.container).offset().top+e(s.container).height(),o<=e(n).offset().top-s.threshold},e.rightoffold=function(n,s){var o;return s.container===r||s.container===t?o=i.width()+i.scrollLeft():o=e(s.container).offset().left+e(s.container).width(),o<=e(n).offset().left-s.threshold},e.abovethetop=function(n,s){var o;return s.container===r||s.container===t?o=i.scrollTop():o=e(s.container).offset().top,o>=e(n).offset().top+s.threshold+e(n).height()},e.leftofbegin=function(n,s){var o;return s.container===r||s.container===t?o=i.scrollLeft():o=e(s.container).offset().left,o>=e(n).offset().left+s.threshold+e(n).width()},e.inviewport=function(t,n){return!e.rightoffold(t,n)&&!e.leftofbegin(t,n)&&!e.belowthefold(t,n)&&!e.abovethetop(t,n)},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("lib/lazyload",function(){}),define("index/carConstrast",[],function(){function s(e){var t=n.api_deleteContrast,r=this;$.ajax({url:t,data:{cid:e},dataType:"json",context:r}).done(function(e){$(this).parent().find("input")[0].checked=!1})}function o(e){var t=n.api_addContrast,r=this,i=!0;i&&$.ajax({type:"POST",url:n.api_addContrast,data:{carId:e},dataType:"json",context:r}).done(function(e){if(e.result==2){this.checked=!0,$(this).parent().find("input")[0].checked=!0;var t=e.contrastId;$(this).parent().attr("contrastId",t);var n=$(this).parent().clone();n.css({opacity:.8,position:"absolute",top:$(this).parent().offset().top+"px",left:$(this).parent().offset().left+"px",backgroundColor:"#FF4400",color:"#fff"});var r=$(".side-box .contrast-img").offset().left,s=$(".side-box .contrast-img").offset().top;document.body.appendChild(n[0]),n.animate({top:s,left:r},500,function(){n.remove()})}else if(e.result==-1){this.checked=!0;var o=$(this).parent().parent().parent().find(".contrast-waring");o.html("已经加入对比").removeClass("hidden"),$(this).parent().find("input")[0].checked=!0,window.setTimeout(function(){o.addClass("hidden")},3e3);var t=e.contrastId;$(this).parent().attr("contrastId",t)}else if(e.result==1){var o=$(this).parent().parent().parent().find(".contrast-waring");o.html("对比项已满").removeClass("hidden"),$(this).parent().find("input")[0].checked=!1,window.setTimeout(function(){o.addClass("hidden")},3e3)}i=!1})}var e={},t=!1,n={},r=/^1[3458][0-9]{9}$/,i=function(){$(".carConstrast span,.carConstrast input").live("click",function(e){var t=e.target||e.srcElement;if(t.nodeName=="INPUT")if(this.checked){var n=$(this).parent().attr("carid");o.call(this,n)}else{var r=$(this).parent().attr("contrastid");s.call(this,r)}else if(t.nodeName=="SPAN")if($(this).parent().find("input")[0].checked){var r=$(this).parent().attr("contrastid");s.call(this,r)}else{var n=$(this).parent().attr("carid"),i=$(this).parent().find("input")[0];o.call(i,n),i.checked=!0}e.stopPropagation(),e.preventDefault()})},u=function(e){$.extend(n,e),i()};return e.init=u,e}),define("index/record-tip",[],function(){var e={},t={},n=[];return{init:function(r){e=r,$.ajax({url:e.api_showTipUrl,dataType:"json",success:function(e){e.code==200&&e.userTags&&(e.userTags.brands||e.userTags.maxPrice||e.userTags.minPrice)&&$(".record_warning").removeClass("hidden");if(e.userTags&&e.userTags.brands){for(var r=0;r<e.userTags.brands.length;r++){var i=e.userTags.brands[r];t[i.parameter]||(t[i.parameter]=[]),t[i.parameter].push(i.code),n.push("<em>"+i.name+"</em>")}e.userTags.maxPrice&&e.userTags.minPrice&&n.push("<em>"+(e.userTags.minPrice/1e4).toFixed(0)+"-"+(e.userTags.maxPrice/1e4).toFixed(0)+"万"+"</em>"+"的车"),$(".record_warning span").html(n.join("，"))}e.userTags&&e.userTags.maxPrice&&(t.maxPrice=(e.userTags.maxPrice/1e4).toFixed(0)),e.userTags&&e.userTags.minPrice&&(t.minPrice=(e.userTags.minPrice/1e4).toFixed(0))}}),$(".record_warning .close").on("click",function(t){t.preventDefault(),$.ajax({url:e.api_noShowTipUrl,dataType:"json",success:function(){$(".record_warning").addClass("hidden")}})}),$(".record_warning .add").on("click",function(n){n.preventDefault();var r=e.submit_api+"?tagTip=1&",i=["brands","series","maxPrice","minPrice","minYear","maxYear"],s={brands:[],series:[],startYear:null,endYear:null,minPrice:null,maxPrice:null};if(e.userRequirementJsonForTag)for(var o in s){var u=e.userRequirementJsonForTag[o];if(u&&u.length){for(var a=0;a<u.length;a++)u[a]=u[a].split(",")[0];t[o]&&t[o].join?s[o]=u.concat(t[o]):s[o]=u}else t[o]?s[o]=t[o]:e.userRequirementJsonForTag[o]&&(s[o]=e.userRequirementJsonForTag[o])}$.ajax({url:r,data:{brands:s.brands.join(","),series:s.series.join(","),minYear:s.startYear,maxYear:s.endYear,minPrice:s.minPrice,maxPrice:s.maxPrice},dataType:"json",success:function(){window.location.reload()},error:function(){}})})}}}),define("souche/util/image-resize",[],function(){return{init:function(e,t,n){$(e).each(function(e,r){r.onload=function(){var e=this.width,i=this.height;i==0||e/i<=t/n?$(this).css({width:"100%",height:"auto"}):($(this).css({height:"100%",width:"auto"}),$(r).css({marginLeft:t/2-$(r).width()/2}),$(window).on("resize",function(){$(r).css({marginLeft:t/2-$(r).width()/2})}))}})}}}),define("index/index",["index/car-god","index/top-nav","index/qiugou","souche/custom-select","index/collect","lib/lazyload","index/carConstrast","index/record-tip","souche/util/image-resize"],function(e,t,n,r,i,s,o,u,a){var f={},l=1,c=0,h=function(){var e=null,t=!1,n=!1,r=function(e){$("."+$("#carsNav li.active").attr("id")+".carsMore span").html("正在获取");var r=this;if($(this).hasClass("myAdviser-more")||e=="myAdviser"){if(t)return;l++;var s=f.getMoreUserRecommend_api+"="+l;$(r).find("span").html("正在加载中..."),l>2&&$(".myAdviser-loading").removeClass("hidden"),$.ajax({url:s,type:"GET",dataType:"json"}).done(function(e){$(r).find("span").html("查看更多"),$(".myAdviser-loading").addClass("hidden"),$(".carsMore.myAdviser-more").remove();if(e.code!=204){var n=e.recommendCars,n=e.recommendCars.items,s="";for(var o=0,u=n.length;o<u;o++){var a=contextPath+"/pages/choosecarpage/choose-car-detail.html?carId="+n[o].id;s+='<div class="carsItem carItem"><a target=\'_blank\' href="'+a+'" class="carImg"><img src=\''+(n[o].carPicturesVO||{}).pictureBig+"' ></a><a target='_blank' href='"+a+"' class='car-link'>"+n[o].carVo.carOtherAllName+"</a>"+"<div class='info'><span class='price'>￥"+n[o].carVo.salePriceToString+"万</span><span class='shangpai'>上牌："+n[o].carVo.firstLicensePlateDateShow+"</span></div>"+"<div class='other'>"+"<div title='"+n[o].recommendReasonStr+"' class='recommended'><span class='"+(n[o].recommendReasonStr?"":"hidden")+"' >推荐理由："+n[o].recommendReasonStr+"</span></div>"+"</div>"+"<div class='carTail clearfix'>"+"<a data-carid='"+n[o].id+"' data-num='"+n[o].count+"' class='collect carCollect "+(n[o].favorite?"active":"")+"'>收藏<span>"+n[o].count+"</span></a>"+"<span class='recommendedToday'>"+n[o].recommendTime+"</span></div>"+"</div>"}$(".myAdviserContent .myAdviser").eq(0).append(s),$(".myAdviserContent .myAdviser-more").remove(),e.hasNext||(t=!0)}i=!0})}else{if(n)return;c++;var s=f.getMoreHotCars_api+c;$(r).find("span").html("正在加载中..."),c>2&&$(".hotNewCars-loading").removeClass("hidden"),$.ajax({url:s,type:"GET",dataType:"json"}).done(function(e){$(r).find("span").html("查看更多"),$(".hotNewCars-loading").addClass("hidden"),$(".carsMore.hotNewCars-more").remove();if(e.code!=204){var t=e.newCars.items;if(t.length==0)n=!0;else{var s="";for(var o=0,u=t.length;o<u;o++){var a=contextPath+"/pages/choosecarpage/choose-car-detail.html?carId="+t[o].id;s+="<div class='carsItem carItem'><a target='_blank' href='"+a+"' class='carImg'><img src='"+(t[o].carPicturesVO||{}).pictureBig+"' ></a><a target='_blank' href='"+a+"' class='car-link'>"+t[o].carVo.carOtherAllName+"</a>"+"<div class='info'><span class='price'>￥"+(t[o].limitSpec||t[o].price)+"万</span><span class='shangpai'>上牌："+t[o].carVo.firstLicensePlateDateShow+"</span></div>"+"<div class='other'>"+"<div title='"+t[o].recommendReasonStr+"' class='recommended'><span class='"+(t[o].recommendReasonStr?"":"hidden")+"' >推荐理由："+t[o].recommendReasonStr+"</span></div>"+"</div>"+"<div class='carTail clearfix'>"+"<a data-carid='"+t[o].id+"' data-num='"+t[o].count+"' class='collect carCollect "+(t[o].favorite?"active":"")+"'>收藏<span>"+t[o].count+"</span></a>"+"<div class='carConstrast' contrastid='"+t[o].contrastId+"' carid='"+t[o].id+"'><input type='checkbox'  "+(t[o].contrastId?"checked":"")+"><span>加入对比</span></div>"+"<div class='contrast-waring hidden'>对比栏已满！你可以删除不需要的车辆，再继续添加。</div></div></div>"}$(".hotNewCarsContent .hotNewCars").eq(0).append(s)}}i=!0})}},i=!0;$(".carsMore").click(function(){r.call(this);var e=this;$(window).scroll(function(){$("."+$("#carsNav li.active").attr("id")+" .carsMore").length==0&&$("#footer").offset().top-600<=$(window).scrollTop()+$(window).height()&&i&&(i=!1,r($("#carsNav li.active").attr("id")))})})},p=function(e,t){var n=e,r={endYear:n.attr("endYear"),endMonth:n.attr("endMonth"),endDay:n.attr("endDay"),endHour:n.attr("endHour"),serverYear:n.attr("serverYear"),serverMonth:n.attr("serverMonth"),serverDay:n.attr("serverDay"),serverHour:n.attr("serverHour"),serverMin:n.attr("serverMin"),serverSec:n.attr("serverSec"),offHour:0,offMin:0,offSec:0,offMSec:0,offDay:0},i=function(){var e="",t="",i="",s="";r.offDay<10&&(s="0"),r.offHour<10&&(e="0"),r.offMin<10&&(t="0"),r.offSec<10&&(i="0"),n.html("<span>剩余：<ins>"+s+r.offDay+"</ins>&nbsp天&nbsp<ins>"+e+r.offHour+"</ins>&nbsp时&nbsp<ins>"+t+r.offMin+"</ins>&nbsp分&nbsp<ins>"+i+r.offSec+"."+r.offMSec+"</ins>&nbsp秒</span>")},s=function(){var e=new Date(r.endYear,r.endMonth,r.endDay,r.endHour,0,0),n=new Date(r.serverYear,r.serverMonth,r.serverDay,r.serverHour,r.serverMin,r.serverSec);t&&(e=t.endDate,n=t.startDate);var s=Date.parse(e)-Date.parse(n);if(s<0)return r.offMSec=0,r.offSec=0,r.offMin=0,r.offHour=0,r.offDay=0,i(),!1;r.offDay=Math.floor(s/24/36e5),r.offHour=Math.floor(s/36e5%24);var o=s%36e5;r.offMin=Math.floor(o/6e4);var u=o%6e4;r.offSec=Math.floor(u/1e3),i()};s();var o=setInterval(function(){--r.offMSec,r.offMSec<0&&(r.offMSec=9,--r.offSec,r.offSec<0&&(r.offSec=59,--r.offMin,r.offMin<0&&(r.offMin=59,--r.offHour,r.offHour<0&&(clearInterval(o),r.offSec=0,r.offMin=0,r.offHour=0)))),i()},100)};return{init:function(r){$.extend(f,r),$(document).ready(function(){$(".flexslider").flexslider({animation:"slide",slideshowSpeed:5e3,directionNav:!0,controlNav:!0,pauseOnHover:!0}),$(".right-slide").flexslider({slideshow:!1,animation:"slide",slideshowSpeed:5e3,controlNav:!0,animationLoop:!1,randomize:!0,directionNav:!1}),$(".flex-direction-nav").hide(),$(".main-slider").mouseenter(function(){$(".flex-direction-nav").fadeIn("normal")}),$(".main-slider").mouseleave(function(){$(".flex-direction-nav").fadeOut("normal")})}),h(),e.init(),t.init(),n.init(f),o.init(f),$(".down-counter").each(function(){var e=$(this);p(e)}),i.init(f),$(".carsContent img").lazyload({threshold:200}),$(".card-login").click(function(){Souche.MiniLogin.checkLogin(function(){window.location.reload()})}),$.ajax({url:f.api_guessCars,success:function(e){$(".guess-like").html(e),a.init(".guess-like .carsItem img",240,160),$(".nolike").on("click",function(e){var t=this;$(t).closest(".like-box").animate({opacity:0,width:0},500,function(){$(t).closest(".like-box").remove()}),$.ajax({url:f.api_nolikeUrl,data:{carId:$(this).attr("data-id")},dataType:"json",success:function(){}})})}}),$("#carsNav li").click(function(){$("#carsNav li").removeClass("active"),$(this).addClass("active");var e=$(this).attr("id");return tabID=e,$(window).trigger("tab_change",e),e!=="myAdviser"&&e=="hotNewCars"&&$(".hotNewCars img").each(function(e,t){$(t).attr("src",$(t).attr("data-original"))}),$(".carsContent").addClass("hidden"),$(".carsContent."+tabID+"Content").removeClass("hidden"),!1}),a.init(".carsItem .img",240,160),u.init(f)}}});