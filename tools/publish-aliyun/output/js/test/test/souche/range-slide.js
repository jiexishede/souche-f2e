define(function(){var n="mousedown",e="mouseup",t="mousemove";"ontouchstart"in window&&(n="touchstart",e="touchend",t="touchmove");var i=function(n){this.config={ele:"",steps:["0万","3万","5万","6万","7万","8万","9万","10万","12万","14万","15万","16万","18万","20万","22万","24万","25万","30万","35万","40万","50万","60万","70万","100万","无限"],min:"8万",max:"20万",tpl:"%"},$.extend(this.config,n),this.ele=$(this.config.ele),this.controlMin=$(".sc-rangeslider-min",this.ele),this.controlMax=$(".sc-rangeslider-max",this.ele),this.data={min:null,max:null},this._init()};return $.extend(i.prototype,{getData:function(){return this.data}}),$.extend(i.prototype,{_init:function(){this._bindControls()},_bindControls:function(){var i=this,a=i.config.steps,o=i.ele.width(),r=a.length,l=o/(r-1);$(window).on("resize",function(){o=i.ele.width(),r=a.length,l=o/(r-1),f(i.data.min.value,i.data.max.value)});var g=function(n){for(var e=0;r-1>e;e++){var t=e*o/(r-1),a=(e+1)*o/(r-1);if(n>=t&&a>=n){var l=(t+a)/2;return l>n?{index:e,pix:t,value:i.config.steps[e]}:{index:e+1,pix:a,value:i.config.steps[e+1]}}}};$(i).on("minchange",function(n,e){$(".sc-rangeslider-tip-inner span",i.controlMin).html(i.config.tpl.replace("%",e.value)),$(".min-input",i.ele).val(e.value),i.data.min=e,$(i).trigger("change",i.getData())}),$(i).on("maxchange",function(n,e){$(".sc-rangeslider-tip-inner span",i.controlMax).html(i.config.tpl.replace("%",e.value)),$(".max-input",i.ele).val(e.value),i.data.max=e,$(i).trigger("change",i.getData())}).on("change",function(n,e){e.min&&e.max&&i.drawHighlight(e.min.pix,e.max.pix)});var c=function(n){real=g(n),$(i).trigger("minchange",real),i.controlMin.css({left:real.pix-10})},s=function(n){real=g(n),$(i).trigger("maxchange",real),i.controlMax.css({left:real.pix-10})},i=this,f=function(n,e){var n=n?n:i.config.min,e=e?e:i.config.max;if(n){for(var t=0,a=0;a<i.config.steps.length;a++)i.config.steps[a]==n&&(t=a);real=g(t*i.ele.width()/(i.config.steps.length-1)),$(i).trigger("minchange",real),i.controlMin.css({left:real.pix-10})}if(e){for(var t=0,a=0;a<i.config.steps.length;a++)i.config.steps[a]==e&&(t=a);real=g(t*i.ele.width()/(i.config.steps.length-1)),$(i).trigger("maxchange",real),i.controlMax.css({left:real.pix-10})}};f(),$(document.body).on(t,function(n){if(i.controlMin.dragging){i.controlMax.dragging=!1;var e={x:n.pageX,y:n.pageY};if(n.originalEvent.targetTouches&&n.originalEvent.targetTouches[0])var e={x:n.originalEvent.targetTouches[0].pageX,y:n.originalEvent.targetTouches[0].pageY};var t=i.ele.offset(),a=i.controlMax.offset().left-t.left,o=e.x-t.left;0>o&&(o=0),o>=a-2*l&&s(o+2*l),real=g(o),real.pix=o-10,$(i).trigger("minchange",real),i.controlMin.css({left:o-10}),n.preventDefault()}else if(i.controlMax.dragging){i.controlMin.dragging=!1;var e={x:n.pageX,y:n.pageY};if(n.originalEvent.targetTouches&&n.originalEvent.targetTouches[0])var e={x:n.originalEvent.targetTouches[0].pageX,y:n.originalEvent.targetTouches[0].pageY};var t=i.ele.offset(),r=i.controlMin.offset().left-t.left,o=e.x-t.left;o>i.ele.width()&&(o=i.ele.width()),r+2*l>=o&&c(o-2*l),real=g(o),real.pix=o-10,$(i).trigger("maxchange",real),i.controlMax.css({left:o-10}),n.preventDefault()}}).on(e,function(n){n.stopPropagation(),i.controlMin.dragging=!1,i.controlMax.dragging=!1}),this.ele.on(t,function(n){n.comesFromScrollable=!0}),this.controlMin.on(n,function(){i.controlMin.dragging=!0}).on("click",function(n){n.stopPropagation()}),this.controlMax.on(n,function(){i.controlMax.dragging=!0}).on("click",function(n){n.stopPropagation()})},drawHighlight:function(n,e){$(".sc-rangeslider-highlight",this.ele).css({left:n,width:e-n})}}),i});