ossApi = require '../lib/oss_client.js'
OSS = require('ali-oss')
co = require('co')
global.config = require '../config.coffee'
queuedo = require 'queuedo'
path = require 'path'
fs = require 'fs'
fse = require 'fs-extra'
oss = new ossApi.OssClient(config)
client = OSS.create(config)
client.upload = co(client.upload)
client.get = co(client.get)
client.remove = co(client.remove)
timestampData = {}
countObject = (obj)->
  count = 0
  for i of obj
    count++
  return count

brands = [
  "series-2806",
"series-924",
"series-1587",
"series-2301",
"series-2557",
"series-216",
"series-1816",
"series-327",
"series-1592",
"series-963",
"series-668",
"series-2776",
"series-2732",
"series-642",
"series-1858",
"series-1999",
"series-2088",
"series-245",
"series-377",
"series-1609",
"series-1289",
"series-2696",
"series-1368",
"series-1294",
"series-2129",
"series-2332",
"series-2030",
"series-1408",
"series-637",
"series-587",
"series-604",
"series-2003",
"series-1614",
"series-47",
"series-1028",
"series-1263",
"series-2327",
"series-1466",
"series-2729",
"series-1483",
"series-2426",
"series-1663",
"series-1446",
"series-1073",
"series-1968",
"series-2302",
"series-2146",
"series-2173",
"series-896",
"series-1986",
"series-2263",
"series-2564",
"series-643",
"series-2387",
"series-1074",
"series-1871",
"series-1085",
"series-2802",
"series-2679",
"series-1473",
"series-2473",
"series-1451",
"series-1850",
"series-1419",
"series-1946",
"series-2517",
"series-2561",
"series-2552",
"series-1376",
"series-869",
"series-2721",
"series-1565",
"series-2844",
"series-1841",
"series-12",
"series-351",
"series-2052",
"series-683",
"series-2165",
"series-1715",
"series-2832",
"series-416",
"series-1925",
"series-1076",
"series-445",
"series-1721",
"series-2483",
"series-138",
"series-2141",
"series-78",
"series-2367",
"series-2497",
"series-2231",
"series-8",
"series-1792",
"series-1932",
"series-563",
"series-12302",
"series-2022",
"series-2789",
"series-1470",
"series-2688",
"series-2788",
"series-1869",
"series-2627",
"series-2392",
"series-2766",
"series-1519",
"series-2062",
"series-393",
"series-2573",
"series-2753",
"series-1177",
"series-1771",
"series-2639",
"series-1235",
"series-2216",
"series-2571",
"series-2610",
"series-1209",
"series-2533",
"series-2114",
"series-2196",
"series-1634",
"series-2484",
"series-805",
"series-175",
"series-180",
"series-856",
"series-1709",
"series-2797",
"series-678",
"series-2673",
"series-2350",
"series-1174",
"series-2427",
"series-119",
"series-18",
"series-2134",
"series-2778",
"series-2604",
"series-1501",
"series-819",
"series-1469",
"series-264",
"series-2042",
"series-2153",
"series-938",
"series-2397",
"series-1234",
"series-1548",
"series-2773",
"series-148",
"series-779",
"series-926",
"series-2399",
"series-2122",
"series-978",
"series-1062",
"series-1189",
"series-1260",
"series-291",
"series-2661",
"series-1998",
"series-1826",
"series-1659",
"series-2452",
"series-1410",
"series-1622",
"series-1422",
"series-2665",
"series-1823",
"series-2616",
"series-294",
"series-1384",
"series-2821",
"series-1482",
"series-659",
"series-762",
"series-1692",
"series-1301",
"series-2774",
"series-415",
"series-1628",
"series-1783",
"series-1662",
"series-1489",
"series-760",
"series-791",
"series-1684",
"series-434",
"series-2626",
"series-15",
"series-1514",
"series-2265",
"series-591",
"series-648",
"series-167",
"series-34",
"series-293",
"series-2384",
"series-1091",
"series-773",
"series-1959",
"series-1010",
"series-300",
"series-2471",
"series-687",
"series-144",
"series-100",
"series-1978",
"series-2525",
"series-1187",
"series-1633",
"series-25",
"series-453",
"series-1338",
"series-459",
"series-1722",
"series-2161",
"series-457",
"series-1060",
"series-1102",
"series-2121",
"series-1615",
"series-2600",
"series-866",
"series-2375",
"series-2465",
"series-2798",
"series-992",
"series-2210",
"series-2468",
"series-2819",
"series-378",
"series-1889",
"series-1656",
"series-2363",
"series-1862",
"series-2472",
"series-1731",
"series-311",
"series-2368",
"series-709",
"series-1347",
"series-33",
"series-2592",
"series-2066",
"series-153",
"series-450",
"series-1083",
"series-1329",
"series-726",
"series-2544",
"series-618",
"series-168",
"series-923",
"series-1029",
"series-2565",
"series-1070",
"series-2318",
"series-2162",
"series-2613",
"series-811",
"series-1321",
"series-136",
"series-2144",
"series-117",
"series-154",
"series-674",
"series-1503",
"series-2562",
"series-2644",
"series-150",
"series-2008",
"series-2698",
"series-769",
"series-565",
"series-1184",
"series-258",
"series-1293",
"series-1937",
"series-194",
"series-2716",
"series-1086",
"series-353",
"series-1831",
"series-2043",
"series-271",
"series-2172",
"series-2458",
"series-104",
"series-737",
"series-2520",
"series-2474",
"series-1825",
"series-1533",
"series-1813",
"series-1445",
"series-2676",
"series-2843",
"series-2193",
"series-1867",
"series-2689",
"series-1965",
"series-2699",
"series-1888",
"series-690",
"series-1396",
"series-49",
"series-348",
"series-30",
"series-2731",
"series-2493",
"series-946",
"series-814",
"series-2400",
"series-130",
"series-365",
"series-932",
"series-1758",
"series-595",
"series-2779",
"series-831",
"series-686",
"series-1319",
"series-2223",
"series-1349",
"series-2407",
"series-615",
"series-972",
"series-1015",
"series-1522",
"series-1996",
"series-1477",
"series-2053",
"series-1230",
"series-843",
"series-1210",
"series-2398",
"series-1744",
"series-139",
"series-174",
"series-2228",
"series-2171",
"series-699",
"series-2666",
"series-331",
"series-623",
"series-1679",
"series-1730",
"series-1814",
"series-672",
"series-734",
"series-1541",
"series-2214",
"series-877",
"series-822",
"series-1147",
"series-1969",
"series-1660",
"series-2247",
"series-725",
"series-1883",
"series-2418",
"series-662",
"series-1217",
"series-1512",
"series-2713",
"series-2428",
"series-1180",
"series-2372",
"series-1165",
"series-2412",
"series-2769",
"series-1882",
"series-809",
"series-2202",
"series-1550",
"series-1485",
"series-1710",
"series-2695",
"series-2080",
"series-1829",
"series-934",
"series-651",
"series-1775",
"series-89",
"series-1096",
"series-802",
"series-371",
"series-2270",
"series-26",
"series-222",
"series-2106",
"series-710",
"series-2131",
"series-257",
"series-201",
"series-2526",
"series-2248",
"series-1345",
"series-2005",
"series-902",
"series-868",
"series-116",
"series-1895",
"series-2225",
"series-2409",
"series-1707",
"series-2194",
"series-2314",
"series-608",
"series-1891",
"series-2611",
"series-2735",
"series-2784",
"series-1699",
"series-1411",
"series-1798",
"series-1797",
"series-2098",
"series-1105",
"series-1440",
"series-552",
"series-2454",
"series-2554",
"series-141",
"series-93",
"series-76",
"series-2707",
"series-16",
"series-1310",
"series-2532",
"series-374",
"series-2519",
"series-202",
"series-665",
"series-1657",
"series-1832",
"series-2102",
"series-2499",
"series-1539",
"series-860",
"series-2623",
"series-1100",
"series-1017",
"series-2027",
"series-871",
"series-2320",
"series-2028",
"series-318",
"series-151",
"series-1961",
"series-2389",
"series-880",
"series-1460",
"series-1042",
"series-1754",
"series-2516",
"series-413",
"series-2341",
"series-289",
"series-2036",
"series-980",
"series-84",
"series-804",
"series-375",
"series-2511",
"series-2014",
"series-788",
"series-1339",
"series-2333",
"series-1320",
"series-1423",
"series-2364",
"series-2640",
"series-86",
"series-1955",
"series-2624",
"series-1032",
"series-1457",
"series-2343",
"series-1994",
"series-2647",
"series-2281",
"series-2055",
"series-1857",
"series-7",
"series-862",
"series-1025",
"series-1222",
"series-1496",
"series-2017",
"series-147",
"series-213",
"series-1845",
"series-1911",
"series-2335",
"series-857",
"series-1737",
"series-1078",
"series-2677",
"series-2822",
"series-1305",
"series-639",
"series-2507",
"series-2700",
"series-355",
"series-2249",
"series-2595",
"series-2064",
"series-1061",
"series-2370",
"series-1467",
"series-1208",
"series-451",
"series-1497",
"series-2654",
"series-1324",
"series-1442",
"series-35",
"series-2674",
"series-2777",
"series-1714",
"series-2342",
"series-2839",
"series-314",
"series-821",
"series-2158",
"series-1087",
"series-685",
"series-1761",
"series-1784",
"series-768",
"series-2439",
"series-671",
"series-2006",
"series-1343",
"series-1308",
"series-1090",
"series-2124",
"series-1072",
"series-1110",
"series-92",
"series-1933",
"series-1742",
"series-1211",
"series-2590",
"series-990",
"series-2662",
"series-2664",
"series-1568",
"series-19",
"series-1794",
"series-2446",
"series-1981",
"series-2436",
"series-324",
"series-1185",
"series-2276",
"series-1957",
"series-2109",
"series-2575",
"series-2628",
"series-1918",
"series-98",
"series-812",
"series-1079",
"series-2250",
"series-2186",
"series-1325",
"series-1596",
"series-2635",
"series-1602",
"series-1518",
"series-1810",
"series-635",
"series-1356",
"series-948",
"series-958",
"series-1553",
"series-2211",
"series-369",
"series-698",
"series-288",
"series-2845",
"series-2655",
"series-2140",
"series-2853",
"series-2594",
"series-1732",
"series-2447",
"series-1849",
"series-816",
"series-80",
"series-876",
"series-2135",
"series-1536",
"series-142",
"series-431",
"series-1357",
"series-1952",
"series-2170",
"series-689",
"series-36",
"series-1005",
"series-2120",
"series-2442",
"series-1516",
"series-1318",
"series-1216",
"series-2359",
"series-1498",
"series-2159",
"series-682",
"series-340",
"series-1311",
"series-283",
"series-1523",
"series-1464",
"series-2057",
"series-2097",
"series-97",
"series-410",
"series-988",
"series-914",
"series-1034",
"series-172",
"series-2818",
"series-2585",
"series-2653",
"series-2538",
"series-212",
"series-2448",
"series-29",
"series-806",
"series-2425",
"series-2424",
"series-2805",
"series-2374",
"series-1179",
"series-2091",
"series-759",
"series-1665",
"series-1292",
"series-1578",
"series-1944",
"series-706",
"series-183",
"series-2668",
"series-598",
"series-211",
"series-2462",
"series-2079",
"series-1983",
"series-2076",
"series-mazida323-1000001",
"series-189",
"series-1900",
"series-1741",
"series-2419",
"series-1705",
"series-1416",
"series-46",
"series-1682",
"series-2852",
"series-2605",
"series-122",
"series-1500",
"series-83",
"series-48",
"series-1526",
"series-2614",
"series-2198",
"series-309",
"series-1417",
"series-2192",
"series-1156",
"series-1650",
"series-1672",
"series-2492",
"series-32",
"series-461",
"series-2208",
"series-2339",
"series-590",
"series-1649",
"series-2244",
"series-2680",
"series-1764",
"series-961",
"series-193",
"series-998",
"series-2099",
"series-2512",
"series-1834",
"series-1475",
"series-1906",
"series-2542",
"series-2322",
"series-2035",
"series-1577",
"series-1330",
"series-392",
"series-840",
"series-2521",
"series-660",
"series-372",
"series-2272",
"series-1590",
"series-284",
"series-2583",
"series-661",
"series-1517",
"series-1511",
"series-1824",
"series-2258",
"series-617",
"series-1348",
"series-2252",
"series-2047",
"series-1003",
"series-1197",
"series-2714",
"series-2082",
"series-2175",
"series-1378",
"series-2051",
"series-2264",
"series-2669",
"series-2754",
"series-1734",
"series-2576",
"series-1735",
"series-1802",
"series-705",
"series-2522",
"series-2143",
"series-1016",
"series-198",
"series-1912",
"series-997",
"series-905",
"series-1886",
"series-1970",
"series-2801",
"series-2480",
"series-872",
"series-2529",
"series-2405",
"series-2054",
"series-295",
"series-2567",
"series-908",
"series-1910",
"series-2336",
"series-81",
"series-1171",
"series-165",
"series-1247",
"series-870",
"series-2752",
"series-1767",
"series-2118",
"series-2527",
"series-2025",
"series-1989",
"series-755",
"series-140",
"series-2804",
"series-2112",
"series-1929",
"series-1088",
"series-1399",
"series-2768",
"series-1624",
"series-2443",
"series-1733",
"series-2450",
"series-2156",
"series-1894",
"series-619",
"series-1966",
"series-2260",
"series-2312",
"series-1839",
"series-2073",
"series-1116",
"series-1629",
"series-2329",
"series-1670",
"series-612",
"series-1653",
"series-2376",
"series-2690",
"series-2113",
"series-113",
"series-1413",
"series-937",
"series-1149",
"series-707",
"series-2710",
"series-2758",
"series-2081",
"series-723",
"series-2262",
"series-2323",
"series-2494",
"series-2724",
"series-2296",
"series-693",
"series-1563",
"series-1868",
"series-2357",
"series-949",
"series-1390",
"series-236",
"series-927",
"series-1316",
"series-1903",
"series-2152",
"series-272",
"series-2652",
"series-111",
"series-921",
"series-1521",
"series-341",
"series-2037",
"series-1755",
"series-555",
"series-1870",
"series-589",
"series-2449",
"series-2422",
"series-1192",
"series-2742",
"series-2708",
"series-2356",
"series-1529",
"series-2068",
"series-2761",
"series-88",
"series-1279",
"series-430",
"series-1326",
"series-1167",
"series-1351",
"series-2659",
"series-335",
"series-356",
"series-1799",
"series-347",
"series-332",
"series-1405",
"series-2744",
"series-2348",
"series-2625",
"series-1333",
"series-2830",
"series-2782",
"series-2414",
"series-2437",
"series-667",
"series-2808",
"series-1084",
"series-1936",
"series-2148",
"series-1861",
"series-1636",
"series-754",
"series-2127",
"series-1760",
"series-210",
"series-2311",
"series-1673",
"series-2149",
"series-1671",
"series-1892",
"series-1812",
"series-2796",
"series-2044",
"series-2273",
"series-2393",
"series-2328",
"series-2420",
"series-haima-1000000",
"series-1676",
"series-894",
"series-2612",
"series-1049",
"series-2694",
"series-1708",
"series-1176",
"series-964",
"series-1589",
"series-2547",
"series-2292",
"series-2021",
"series-346",
"series-2810",
"series-2609",
"series-1525",
"series-2787",
"series-2038",
"series-1935",
"series-1468",
"series-1191",
"series-367",
"series-2485",
"series-306",
"series-1033",
"series-1848",
"series-368",
"series-2239",
"series-146",
"series-583",
"series-1472",
"series-641",
"series-2345",
"series-2537",
"series-835",
"series-2722",
"series-2269",
"series-1769",
"series-1736",
"series-454",
"series-1803",
"series-2232",
"series-1546",
"series-2261",
"series-2074",
"series-2413",
"series-2256",
"series-2316",
"series-2622",
"series-2299",
"series-2814",
"series-1793",
"series-1119",
"series-1150",
"series-1425",
"series-602",
"series-1051",
"series-2548",
"series-2277",
"series-427",
"series-2285",
"series-2415",
"series-1967",
"series-68",
"series-1402",
"series-313",
"series-1573",
"series-2834",
"series-2751",
"series-1044",
"series-810",
"series-2646",
"series-1579",
"series-448",
"series-2004",
"series-428",
"series-521",
"series-195",
"series-2132",
"series-688",
"series-11",
"series-1782",
"series-2739",
"series-2813",
"series-1630",
"series-1980",
"series-780",
"series-566",
"series-10",
"series-955",
"series-1341",
"series-2298",
"series-17",
"series-1789",
"series-95",
"series-1406",
"series-1532",
"series-2619",
"series-268",
"series-979",
"series-2126",
"series-2725",
"series-22",
"series-1020",
"series-1507",
"series-740",
"series-28",
"series-344",
"series-613",
"series-297",
"series-443",
"series-321",
"series-91",
"series-1236",
"series-1786",
"series-1011",
"series-1619",
"series-933",
"series-1494",
"series-1153",
"series-1856",
"series-2108",
"series-2675",
"series-2138",
"series-362",
"series-2791",
"series-713",
"series-1990",
"series-1157",
"series-2386",
"series-2195",
"series-2737",
"series-319",
"series-2692",
"series-326",
"series-2274",
"series-1023",
"series-2245",
"series-2117",
"series-1220",
"series-1931",
"series-67",
"series-2670",
"series-2846",
"series-1765",
"series-444",
"series-887",
"series-2593",
"series-2075",
"series-1620",
"series-1353",
"series-834",
"series-1960",
"series-936",
"series-2491",
"series-1642",
"series-1053",
"series-304",
"series-2221",
"series-2809",
"series-2833",
"series-2087",
"series-2048",
"series-616",
"series-1924",
"series-1441",
"series-1404",
"series-2820",
"series-1748",
"series-2568",
"series-107",
"series-325",
"series-1229",
"series-1847",
"series-2835",
"series-1791",
"series-77",
"series-2705",
"series-114",
"series-381",
"series-2209",
"series-584",
"series-2495",
"series-112",
"series-2234",
"series-2362",
"series-2584",
"series-1621",
"series-2224",
"series-2687",
"series-2240",
"series-1543",
"series-2039",
"series-133",
"series-2353",
"series-2728",
"series-1277",
"series-1759",
"series-858",
"series-316",
"series-1930",
"series-188",
"series-2757",
"series-1233",
"series-1219",
"series-2289",
"series-1677",
"series-1504",
"series-1502",
"series-1693",
"series-993",
"series-322",
"series-414",
"series-2617",
"series-1902",
"series-1974",
"series-1772",
"series-279",
"series-2638",
"series-240",
"series-43",
"series-336",
"series-2358",
"series-1939",
"series-458",
"series-2508",
"series-1691",
"series-2288",
"series-2219",
"series-354",
"series-2433",
"series-2503",
"series-1837",
"series-1269",
"series-2559",
"series-1207",
"series-1271",
"series-758",
"series-2621",
"series-1608",
"series-2229",
"series-1613",
"series-1664",
"series-1821",
"series-2000",
"series-433",
"series-1462",
"series-2795",
"series-159",
"series-1251",
"series-2608",
"series-1921",
"series-106",
"series-1057",
"series-2816",
"series-1428",
"series-2815",
"series-1223",
"series-1267",
"series-38",
"series-2205",
"series-2697",
"series-2556",
"series-275",
"series-2772",
"series-559",
"series-657",
"series-815",
"series-2101",
"series-357",
"series-246",
"series-1569",
"series-2308",
"series-1545",
"series-2293",
"series-996",
"series-310",
"series-2385",
"series-2377",
"series-1232",
"series-1112",
"series-982",
"series-1449",
"series-1334",
"series-909",
"series-1593",
"series-1963",
"series-2176",
"series-269",
"series-1169",
"series-1594",
"series-1919",
"series-825",
"series-2720",
"series-1052",
"series-1389",
"series-432",
"series-2629",
"series-2089",
"series-795",
"series-2435",
"series-1412",
"series-1063",
"series-2602",
"series-2203",
"series-2440",
"series-2268",
"series-1461",
"series-2371",
"series-2378",
"series-1458",
"series-767",
"series-2166",
"series-2142",
"series-2133",
"series-1632",
"series-1631",
"series-2467",
"series-1480",
"series-1487",
"series-2438",
"series-1437",
"series-2650",
"series-1804",
"series-1035",
"series-2213",
"series-757",
"series-1690",
"series-569",
"series-1688",
"series-1362",
"series-425",
"series-163",
"series-2167",
"series-848",
"series-925",
"series-1698",
"series-1949",
"series-532",
"series-276",
"series-2009",
"series-1828",
"series-2430",
"series-185",
"series-1280",
"series-hafo-1000001",
"series-2355",
"series-1822",
"series-1328",
"series-1253",
"series-2477",
"series-2304",
"series-1160",
"series-1899",
"series-2671",
"series-2441",
"series-1598",
"series-1224",
"series-738",
"series-893",
"series-2506",
"series-2518",
"series-1641",
"series-2481",
"series-1600",
"series-2416",
"series-1987",
"series-1976",
"series-999",
"series-1332",
"series-1007",
"series-1374",
"series-874",
"series-1790",
"series-6",
"series-656",
"series-2672",
"series-2667",
"series-124",
"series-2163",
"series-1928",
"series-2500",
"series-599",
"series-1913",
"series-286",
"series-2572",
"series-2727",
"series-1350",
"series-2597",
"series-2786",
"series-2236",
"series-1524",
"series-2836",
"series-349",
"series-290",
"series-2730",
"series-1429",
"series-865",
"series-1740",
"series-2235",
"series-561",
"series-164",
"series-2831",
"series-187",
"series-1117",
"series-2455",
"series-460",
"series-1727",
"series-499",
"series-131",
"series-1344",
"series-2395",
"series-1984",
"series-1386",
"series-60",
"series-1762",
"series-2303",
"series-2536",
"series-1193",
"series-581",
"series-2346",
"series-2837",
"series-2396",
"series-1995",
"series-783",
"series-320",
"series-2086",
"series-1281",
"series-2541",
"series-1012",
"series-303",
"series-920",
"series-1962",
"series-71",
"series-1045",
"series-2116",
"series-1977",
"series-1840",
"series-2382",
"series-96",
"series-1830",
"series-1409",
"series-2307",
"series-2747",
"series-1471",
"series-2145",
"series-2651",
"series-2658",
"series-2601",
"series-196",
"series-1746",
"series-2749",
"series-2365",
"series-2381",
"series-1346",
"series-2589",
"series-1421",
"series-1776",
"series-2324",
"series-733",
"series-1155",
"series-1668",
"series-900",
"series-1805",
"series-2383",
"series-1827",
"series-1009",
"series-1534",
"series-1041",
"series-1756",
"series-2199",
"series-2217",
"series-2563",
"series-782",
"series-1161",
"series-2403",
"series-2032",
"series-1749",
"series-1058",
"series-603",
"series-2693",
"series-1118",
"series-339",
"series-105",
"series-1080",
"series-1842",
"series-1916",
"series-1537",
"series-2334",
"series-2702",
"series-1747",
"series-1773",
"series-2736",
"series-611",
"series-2040",
"series-382",
"series-1863",
"series-919",
"series-215",
"series-620",
"series-2582",
"series-1089",
"series-1717",
"series-2279",
"series-14",
"series-370",
"series-39",
"series-2840",
"series-1296",
"series-44",
"series-1922",
"series-1815",
"series-244",
"series-1019",
"series-2794",
"series-2100",
"series-265",
"series-2349",
"series-2636",
"series-1435",
"series-2408",
"series-2275",
"series-1393",
"series-1431",
"series-803",
"series-1689",
"series-2551",
"series-724",
"series-1547",
"series-1667",
"series-2460",
"series-2607",
"series-2344",
"series-108",
"series-1168",
"series-2486",
"series-2169",
"series-79",
"series-2823",
"series-2740",
"series-2838",
"series-1163",
"series-1988",
"series-1540",
"series-256",
"series-1323",
"series-1056",
"series-334",
"series-2686",
"series-2084",
"series-1927",
"series-728",
"series-1583",
"series-2243",
"series-989",
"series-1880",
"series-274",
"series-391",
"series-1377",
"series-2523",
"series-1685",
"series-2251",
"series-669",
"series-2587",
"series-1950",
"series-262",
"series-1716",
"series-1354",
"series-394",
"series-1586",
"series-208",
"series-1591",
"series-1290",
"series-1901",
"series-2139",
"series-301",
"series-1415",
"series-1006",
"series-182",
"series-266",
"series-2633",
"series-747",
"series-1595",
"series-2136",
"series-2168",
"series-184",
"series-2750",
"series-302",
"series-875",
"series-1099",
"series-2496",
"series-1646",
"series-137",
"series-939",
"series-2093",
"series-1973",
"series-2793",
"series-1111",
"series-753",
"series-66",
"series-2137",
"series-2220",
"series-1054",
"series-1392",
"series-1647",
"series-179",
"series-2824",
"series-1838",
"series-1361",
"series-1394",
"series-1004",
"series-1059",
"series-1226",
"series-2033",
"series-449",
"series-2764",
"series-190",
"series-2305",
"series-2712",
"series-1364",
"series-610",
"series-2233",
"series-793",
"series-1069",
"series-1314",
10304320422243
"series-2579",
"series-361",
"series-1273",
"series-2451",
"series-626",
"series-2701",
"series-2807",
"series-1037",
"series-2115",
"series-277",
"series-2007",
"series-1077",
"series-2457",
"series-1819",
"series-1795",
"series-2379",
"series-422",
"series-1370",
"series-708",
"series-596",
"series-1531",
"series-1724",
"series-577",
"series-799",
"series-2733",
"series-1843",
"series-74",
"series-2222",
"series-1605",
"series-580",
"series-1397",
"series-1436",
"series-2310",
"series-2259",
"series-2306",
"series-2056",
"series-2237",
"series-2411",
"series-2643",
"series-1943",
"series-2470",
"series-1680",
"series-197",
"series-2691",
"series-962",
"series-2402",
"series-2785",
"series-82",
"series-1580",
"series-359",
"series-1971",
"series-2581",
"series-2580",
"series-1424",
"series-2394",
"series-2663",
"series-1164",
"series-2058",
"series-1686",
"series-1218",
"series-2489",
"series-1474",
"series-2150",
"series-230",
"series-345",
"series-2524",
"series-1926",
"series-1231",
"series-1751",
"series-2388",
"series-2083",
"series-1752",
"series-296",
"series-72",
"series-1745",
"series-267",
"series-2734",
"series-1067",
"series-323",
"series-2287",
"series-2760",
"series-2800",
"series-1335",
"series-1915",
"series-2300",
"series-2284",
"series-975",
"series-2313",
"series-2061",
"series-350",
"series-1718",
"series-1678",
"series-981",
"series-640",
"series-1582",
"series-384",
"series-586",
"series-2267",
"series-2254",
"series-1225",
"series-1720",
"series-2070",
"series-281",
"series-1588",
"series-1697",
"series-2401",
"series-2018",
"series-903",
"series-2029",
"series-2478",
"series-1379",
"series-2361",
"series-2555",
"series-2558",
"series-2578",
"series-1400",
"series-677",
"series-1490",
"series-801",
"series-1909",
"series-1170",
"series-2543",
"series-560",
"series-1382",
"series-1313",
"series-2183",
"series-1143",
"series-143",
"series-412",
"series-1418",
"series-976",
"series-2151",
"series-1820",
"series-1302",
"series-1975",
"series-2325",
"series-582",
"series-2444",
"series-152",
"series-1027",
"series-1322",
"series-2282",
"series-2246",
"series-916",
"series-156",
"series-2107",
"series-121",
"series-358",
"series-2207",
"series-2271",
"series-2200",
"series-1022",
"series-1584",
"series-1001",
"series-2226",
"series-158",
"series-1896",
"series-1538",
"series-73",
"series-178",
"series-2015",
"series-186",
"series-796",
"series-1355",
"series-2067",
"series-207",
"series-417",
"series-452",
"series-1719",
"series-1860",
"series-1567",
"series-5",
"series-2642",
"series-1048",
"series-1493",
"series-1581",
"series-1945",
"series-1291",
"series-2535",
"series-455",
"series-2434",
"series-2060",
"series-2586",
"series-1040",
"series-2637",
"series-2453",
"series-2421",
"series-315",
"series-1881",
"series-2514",
"series-2337",
"series-1107",
"series-1300",
"series-1920",
"series-1106",
"series-2253",
"series-135",
"series-1993",
"series-1380",
"series-2505",
"series-1750",
"series-2799",
"series-2515",
"series-2045",
"series-2354",
"series-2096",
"series-2283",
"series-562",
"series-1215",
"series-442",
"series-2410",
"series-1651",
"series-61",
"series-2771",
"series-2013",
"series-1391",
"series-2685",
"series-2157",
"series-2718",
"series-270",
"series-1484",
"series-1852",
"series-787",
"series-2792",
"series-1337",
"series-2160",
"series-1763",
"series-1566",
"series-2841",
"series-1488",
"series-1864",
"series-2748",
"series-260",
"series-1047",
"series-2431",
"series-1897",
"series-1898",
"series-974",
"series-600",
"series-1151",
"series-2050",
"series-1979",
"series-1564",
"series-849",
"series-2682",
"series-1768",
"series-57",
"series-2574",
"series-169",
"series-606",
"series-1723",
"series-1530",
"series-2553",
"series-229",
"series-2775",
"series-2206",
"series-1513",
"series-1388",
"series-1024",
"series-2738",
"series-2681",
"series-87",
"series-2620",
"series-2684",
"series-280",
"series-206",
"series-115",
"series-995",
"series-2745",
"series-1958",
"series-2230",
"series-772",
"series-209",
"series-2147",
"series-2851",
"series-2174",
"series-1383",
"series-2227",
"series-285",
"series-1905",
"series-2770",
"series-2641",
"series-2464",
"series-1585",
"series-1781",
"series-329",
"series-622",
"series-2417",
"series-913",
"series-2534",
"series-2011",
"series-1675",
"series-59",
"series-2034",
"series-1172",
"series-1713",
"series-13",
"series-1098",
"series-308",
"series-2352",
"series-2466",
"series-601",
"series-239",
"series-2429",
"series-1643",
"series-1743",
"series-2241",
"series-1426",
"series-614",
"series-1551",
"series-1075",
"series-330",
"series-1459",
"series-1645",
"series-994",
"series-1846",
"series-1574",
"series-376",
"series-1544",
"series-1439",
"series-2790",
"series-2657",
"series-1444",
"series-2549",
"series-1788",
"series-2504",
"series-1013",
"series-650",
"series-299",
"series-273",
"series-1371",
"series-1770",
"series-333",
"series-841",
"series-953",
"series-2850",
"series-41",
"series-2456",
"series-2683",
"series-888",
"series-2618",
"series-1704",
"series-2321",
"series-1030",
"series-1612",
"series-1654",
"series-287",
"series-467",
"series-2331",
"series-1535",
"series-2709",
"series-1065",
"series-2257",
"series-2095",
"series-744",
"series-889",
"series-1385",
"series-1369",
"series-253",
"series-2119",
"series-2482",
"series-2811",
"series-69",
"series-1154",
"series-238",
"series-1148",
"series-37",
"series-658",
"series-85",
"series-2715",
"series-20",
"series-1327",
"series-2550",
"series-2026",
"series-2338",
"series-1288",
"series-2501",
"series-1666",
"series-2569",
"series-854",
"series-873",
"series-2290",
"series-1315",
"series-2488",
"series-99",
"series-1835",
"series-1101",
"series-1982",
"series-2326",
"series-1104",
"series-1276",
"series-2746",
"series-1700",
"series-1499",
"series-2255",
"series-2072",
"series-2765",
"series-251",
"series-2369",
"series-2528",
"series-2648",
"series-2498",
"series-2817",
"series-1304",
"series-2711",
"series-2391",
"series-1985",
"series-1447",
"series-2297",
"series-2046",
"series-2706",
"series-1375",
"series-776",
"series-1071",
"series-27",
"series-1268",
"series-1890",
"series-1443",
"series-2763",
"series-2280",
"series-2291",
"series-2069",
"series-328",
"series-2829",
"series-1398",
"series-2539",
"series-2502",
"series-670",
"series-259",
"series-1785",
"series-2130",
"series-864",
"series-2347",
"series-741",
"series-110",
"series-278",
"series-973",
"series-597",
"series-317",
"series-2510",
"series-2660",
"series-959",
"series-2719",
"series-45",
"series-1002",
"series-217",
"series-1549",
"series-181",
"series-1486",
"series-2476",
"series-1050",
"series-2218",
"series-1515",
"series-1366",
"series-1879",
"series-1395",
"series-1865",
"series-2842",
"series-1227",
"series-1173",
"series-594",
"series-1652",
"series-850",
"series-1021",
"series-2598",
"series-2360",
"series-1092",
"series-234",
"series-1528",
"series-2531",
"series-2445",
"series-1317",
"series-1026",
"series-2189",
"series-373",
"series-2111",
"series-1972",
"series-2278",
"series-621",
"series-456",
"series-199",
"series-751",
"series-2105",
"series-2755",
"series-2184",
"series-1712",
"series-1885",
"series-1340",
"series-4",
"series-1948",
"series-1801",
"series-1261",
"series-298",
"series-2487",
"series-2432",
"series-1599",
"series-2828",
"series-1836",
"series-1997",
"series-2016",
"series-1066",
"series-2530",
"series-220",
"series-1178",
"series-1914",
"series-954",
"series-2767",
"series-2094",
"series-2570",
"series-1114",
"series-2723",
"series-1307",
"series-1766",
"series-1934",
"series-1884",
"series-2351",
"series-2591",
"series-2103",
"series-664",
"series-94",
"series-2380",
"series-2330",
"series-1833",
"series-774",
"series-263",
"series-218",
"series-31",
"series-1739",
"series-75",
"series-2340",
"series-833",
"series-1728",
"series-917",
"series-1306",
"series-2212",
"series-2077",
"series-837",
"series-170",
"series-2479",
"series-1476",
"series-2756",
"series-1188",
"series-1238",
"series-128",
"series-907",
"series-1275",
"series-2242",
"series-305",
"series-1031",
"series-2759",
"series-2154",
"series-2041",
"series-2599",
"series-2020",
"series-2490",
"series-1463",
"series-118",
"series-2023",
"series-585",
"series-200",
"series-1465",
"series-9",
"series-1942",
"series-794",
"series-609",
"series-23",
"series-1018",
"series-1866",
"series-2741",
"series-1278",
"series-149",
"series-2825",
"series-2560",
"series-1575",
"series-2577",
"series-125",
"series-1495",
"series-1907",
"series-2204",
"series-1940",
"series-1951",
"series-1777",
"series-2615",
"series-2215",
"series-441",
"series-1639",
"series-2092",
"series-554",
"series-1287",
"series-1264",
"series-680",
"series-2783",
"series-2603",
"series-756",
"series-1109",
"series-2546",
"series-2803",
"series-192",
"series-1953",
"series-1757",
"series-102",
"series-2104",
"series-1272",
"series-625",
"series-766",
"series-1702",
"series-1669",
"series-541",
"series-1064",
"series-2390",
"series-2085",
"series-226",
"series-1644",
"series-219",
"series-129",
"series-2656",
"series-2373",
"series-826",
"series-2606",
"series-1055",
"series-1039",
"series-221",
"series-2024",
"series-1729",
"series-702",
"series-2128",
"series-50",
"series-1817",
"series-2812",
"series-2404",
"series-564",
"series-836",
"series-1282",
"series-1859",
"series-1811"]

queuedo brands,(brand,next,context)->
  client.get "files/carproduct/series/"+brand+".png","cache.test",(error,info)->
      if error
        console.log error
        client.upload "/Users/tianqi/Documents/souche-assets/souche-f2e-new/assets/images/common/series_blank.png","files/carproduct/series/"+brand+".png",(err, data)->
          if err
            console.log err
          next.call(context)
      else
        console.log fs.statSync("cache.test")
        next.call(context)
      
# OSS =
#   #第一个参数是发布的路径，第二个参数是真实发布的文件路径，发布完成调用callback
#   pubFile:(_path,realPath,callback)->
#     console.log '开始处理：'+_path+" 真实路径："+realPath
#     clearPath = _path.replace(/^.*?\//,'/assets/')
#     etag = oss.getObjectEtag(realPath)
#     client.get _path,"cache.test",(error,info)->
#       if error
#         console.log "start uploading "+clearPath
#         if timestampData[clearPath]
#           timestampData[clearPath] = timestampData[clearPath]*1+1
#         else
#           timestampData[clearPath] = 1
#         client.upload realPath,_path.replace(/^\.\//,''),(err, data)->
#           if err
#             console.error err
#           else
#             console.log "upload finished " + _path.replace(/^\.\//,'')
#           callback err
#       else
#         etagOnline = oss.getObjectEtag(__dirname+"/cache.test")
#         if etagOnline != etag
#           console.log "start uploading "+clearPath
#           if timestampData[clearPath]
#             timestampData[clearPath] = timestampData[clearPath]*1+1
#           else
#             timestampData[clearPath] = 1
#           client.upload realPath,_path.replace(/^\.\//,''),(err, data)->
#             if err
#               console.error err
#             else
#               console.log "upload finished " + _path.replace(/^\.\//,'')
#             callback err
#         else
#           console.log "无变化 "
#           callback error

#   getFile:(_path,callback)->
#     oss.getObject config.bucketName,_path.replace(/^\.\//,''),"cache.test",(err,info)->
#       if err
#         console.error err
#       callback err,info
  
# # Publish.pubFile('./lib/oss_client.js')

# # OSS.getFile("./lib/oss_client.js")

# Publish = (_config)->
#   self = this
#   this.config = 
#     properties_file:""
#     white_list:['']
#   for k,v of _config
#     this.config[k]=v
#   this.middlewares = []
#   properties.parse this.config.properties_file,{path:true},(error, obj)->
#     if error then console.error error
#     timestampData = obj
#   undefined

# #添加一个处理中间件，根据ext判断是否要经过这个中间件处理，中间件输入一个文件，返回一个处理过的文件的内容。
# #middleware 返回一个数组，列出要发布的文件结果路径。
# Publish.prototype.addMiddleware = (ext,middleware)->
#   this.middlewares.push({ext:ext,middleware:middleware})

# Publish.prototype.pub = (_path,callback)->
#   console.log(_path)
#   self = this
#   middlewares = this.middlewares
#   walkdo _path,(file,next,context)->
#     console.log("ddd:"+file)
#     self.handleFile file,()->
#       next.call(context)
#   ,()->
#     console.log("all finish!")
#     fse.copy self.config.properties_file,self.config.properties_file+".backup",(error)->
#       if error 
#         console.log error
#         callback error
#         return
#       fs.writeFile self.config.properties_file,properties.stringify(timestampData),'utf-8',(error)->
#         if error
#           console.log error
#           callback error
#           return
#         console.log 'properties length:'+countObject(timestampData)
#         if callback then callback(null,{
#           properties_length:countObject(timestampData)
#         })
# Publish.prototype.handleFile = (file,callback)->
#   obj = 
#     path:file
#     realPath:file
#   self = this
#   is_in_white = false
#   extname = path.extname(file)
#   for i in [0...this.config.white_list.length]
#     if extname.indexOf(this.config.white_list[i]) != -1
#       is_in_white = true
#   if !is_in_white 
#     callback null
#     return
#   queuedo this.middlewares,(mw,next,context)-> 
#     if extname == mw.ext
#       mw.middleware obj.realPath,(error,result)->
#         if error
#           console.log error
#         else
#           obj.path = result.path
#           obj.realPath = result.realPath
#         next.call(context)
#     else
#       next.call(context)
#   ,()->
#     self.pubFile(obj.path,obj.realPath,callback)

# Publish.prototype.pubFile = (_path,realPath,callback)->
#   OSS.pubFile(_path.replace(/^.*assets\//,'assets/'),realPath,callback)


# module.exports = Publish