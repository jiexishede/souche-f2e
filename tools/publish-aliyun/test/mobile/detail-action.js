var Action=function(){var t=/^1[3458][0-9]{9}$/;return{init:function(){var e=!1,u=!0;$("#yuyue_submit").on("click",function(t){t.preventDefault(),e||SM.checkPhoneExist(function(t){t?n():(u=!0,a())})});var a=function(){u?($("#yuyue-form .tip").html("  输入您的手机号码,一键完成预约."),$("#yuyue-form #yuyue-sumbit-btn").html("预约")):($("#yuyue-form .tip").html("  输入您的手机号码,一键完成收藏."),$("#yuyue-form #yuyue-sumbit-btn").html("收藏")),$("#yuyue-popup").removeClass("hidden"),$(".wrapGrayBg").show()};$("#yuyue-back").on("click",function(t){t.preventDefault(),$("#yuyue-popup").addClass("hidden"),$(".wrapGrayBg").hide()}),$("#yuyue-form").on("submit",function(e){e.preventDefault(),t.test($("#yuyue-phone").val())?SM.PhoneRegister($("#yuyue-phone").val(),function(){u?n():o()}):$(".warning",this).removeClass("hidden")});var i=function(){var t=$("#yuyue-popup"),e=$(window).width(),a=$(window).height(),i=$("#actions").height();if(u)var n={x:.2*e,y:a-i-40};else var n={x:.55*e,y:a-i-40};t.animate({width:0,height:0,left:n.x,top:n.y},350,"linear",function(){t.addClass("hidden"),t.css({width:"100%",height:"100%",top:"0px",left:"0"})})},n=function(){$("#yuyue-sumbit-btn").html("预约中..."),$.ajax({url:$("#yuyue_submit").attr("href"),type:"post",dataType:"json",success:function(t){t.errorMessage?(alert(t.errorMessage),$("#yuyue_submit").html("预约到店看车")):t.code&&"200"==t.code?($("#contactNum").html(1*$("#contactNum").html()+1),$("#yuyue_submit").addClass("disabled").html("已预约成功"),e=!0):t.code&&"402"==t.code?(alert("您已经预约过该车,七天之内不能重复预约!"),$("#yuyue_submit").addClass("disabled").html("已预约成功"),e=!0):(alert("预约出错，请联系客服!"),$("#yuyue_submit").html("预约到店看车")),i()}})},s=!1;$("#fav_submit").on("click",function(t){t.preventDefault(),s||SM.checkPhoneExist(function(t){t?o():(u=!1,a())})});var o=function(){$("#yuyue-sumbit-btn").html("收藏中..."),$.ajax({url:$("#fav_submit").attr("href"),dataType:"json",success:function(t){t.errorMessage?(alert(t.errorMessage),$("#fav_submit").html("收藏")):($("#fav_submit").addClass("disabled").html("已收藏"),s=!0,$("#carFavoriteNum").html(1*$("#carFavoriteNum").html()+1)),i()}})}}}}();