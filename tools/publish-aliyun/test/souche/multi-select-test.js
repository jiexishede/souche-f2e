Souche.UI.CustomMultiSelect=function(){var t=function(t){this.id=t,this.ele=$("string"==typeof t?"#"+this.id:t),this.config={isAutoDrop:!0,maxDisplayItems:10,placeholder:"请您选择"},this.selected=[],this.$head=$(".sc-select-hd",this.ele),this.$list=$(".sc-select-list",this.ele),this.$content=$(".sc-select-content",this.ele),this._defaultHeadHeight=30,this._init()},e=t.prototype;return e._init=function(t){var e=this;for(var i in t)this.config[i]=t[i];var s=this.$head,a=this.$list;this._defaultHeadHeight=s.height(),a.css({height:30*this.config.maxDisplayItems}),$(document.body).on("click",function(){e.hideOptions()}),this._inputClick(),this._contentClick(),this._listClick()},e.addOption=function(t,e){var i=$("<li data-value="+t+'><a href="#"><input type="checkbox" /><span class="value">'+e+"</span></a></li>");this.$list.append(i)},e.removeOption=function(t){$("li[data-value="+t+"]",this.$list).remove()},e.removeAll=function(){this.$list.html("")},e.showOptions=function(){this.$list.removeClass("hidden")},e.hideOptions=function(){this.$list.addClass("hidden")},e.addSelected=function(t,e){var i=this.$content,s=this.$list;0===this.selected.length&&$("span",i).remove();var a=$('<div class="sc-selected-item" data-value='+t+">"+e+'<i class="sc-close">x</i></div>');i.append(a);var s=this.$list;$("li[data-value="+t+"] input[type=checkbox]",s).attr("checked",!0);var c=Math.max(i.height(),this._defaultHeadHeight);s.css({top:c}),this.selected.push({key:t,value:e})},e.removeSelected=function(t){var e=this.$content;$("div[data-value="+t+"]",e).remove();for(var i=this.selected,s=0;s<i.length;s++)if(i[s].key==t){i.splice(s,1);break}var a=this.$list;$("input[type=checkbox]",a).attr("checked",!1),0===i.length&&e.html("<span class='placeholder'>"+this.config.placeholder+"</span>");var c=Math.max(this.$content.height(),this._defaultHeadHeight);a.css({top:c})},e._inputClick=function(){var t=this,e=this.$list,i=this.$head;i.click(function(i){e.removeClass("hidden"),e.scrollTop(0);var s=Math.max(t.$content.height(),t._defaultHeadHeight);e.css({top:s}),i.stopPropagation()})},e._contentClick=function(){var t=this;this.$content.on("click",".sc-selected-item",function(e){var i=$(this).attr("data-value");t.removeSelected(i),e.stopPropagation()})},e._listClick=function(){var t=this;$(t.$list).on("click","li",function(e){var i=$(this).attr("data-value"),s=$("span",$(this)).html(),a=$("input[type=checkbox]",t.$list);a.attr("checked")?t.removeSelected(i):t.addSelected(i,s),e.stopPropagation()})},t}();